<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>中里一日記: 2006&#24180;06&#26376; Archives</title>

<link rel="stylesheet" href="http://kaoriha.org/nikki/styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://kaoriha.org/nikki/index.rdf" />
<link rel="start" href="http://kaoriha.org/nikki/" title="Home" />
<link rel="prev" href="http://kaoriha.org/nikki/archives/2006_05.html" title="2006&#24180;05&#26376;" />

<link rel="next" href="http://kaoriha.org/nikki/archives/2006_07.html" title="2006&#24180;07&#26376;" />


<script language="javascript" type="text/javascript">
function OpenComments (c) {
    window.open(c,
                    'comments',
                    'width=480,height=480,scrollbars=yes,status=yes');
}

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
}
</script>

<script src="/ga.js"></script>

</head>

<body>	

<div id="banner">
<h1><a href="http://kaoriha.org/nikki/" accesskey="1">中里一日記</a></h1>
<span class="description"></span>
</div>

<div id="container">

<div class="blog">

<div id="menu">
<a href="http://kaoriha.org/nikki/archives/2006_05.html">&laquo; 2006&#24180;05&#26376;</a> |

<a href="http://kaoriha.org/nikki/">Main</a>
| <a href="http://kaoriha.org/nikki/archives/2006_07.html">2006&#24180;07&#26376; &raquo;</a>

</div>

</div>

<div class="blog">


<h2 class="date">2006&#24180;06&#26376;28&#26085;</h2>


<div class="blogbody">
<a name="000324"></a>
<h3 class="title">さおだけ屋はなぜ潰れないのか</h3>

<p>　某新書は<a href="http://asia.google.com/search?hl=ja&q=%E6%9C%AC%E3%81%AF%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB%E3%81%8C9%E5%89%B2&btnG=Google+%E6%A4%9C%E7%B4%A2&lr=">タイトルが9割</a>なので私もタイトルしか知らないが、たぶんそれで十分なのだろう。というわけでご紹介する。<br />
<a href="http://blogs.itmedia.co.jp/koji/2006/06/post_fea4.html">さおだけ屋から竿竹を買った</a><br />
　私はヤクザが死ぬほど嫌いなので、この手の訪問販売にこられると心底頭にくる。執事のいる家に住みたい。</p>



<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000324.html">21:21</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=324" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;27&#26085;</h2>


<div class="blogbody">
<a name="000323"></a>
<h3 class="title">1492:50</h3>

<p>　またもネタ切れのため設定の話をする。<br />
　作中の木更津は、現実の木更津より7割増しで栄えている。現実の木更津が今の2倍栄えても、ゲーマーズやアニメイトはできそうにないので、ああいう表現になっている。東京に近く若年人口の多い習志野市（人口16万、アニメイトあり）でも限界に近いと思われるが、現実の木更津市の人口は12万だ。</p>

<p>　<br />
　　　　　　　　　　　　　　　　　　　　　　　　＊<br />
　<br />
　朝のブリーフィングは、準備体操に似ている。<br />
　担当の官房職員が決まりきったことを淡々と説明して、今日のスケジュールを配る。たまに警護班のリーダーが発言して終わる。難しい問題が持ちあがることはめったにない。雰囲気もたるんでいる。けれど、ここで調子をつけておかないと、あとでミスが出やすい。<br />
　今日のスケジュールは、午後3時以降が空白になっている。<br />
　「陛下のご意向により、午後3時からご休息です。以上です」<br />
　緋沙子とのお別れに時間を割こうというお考えだろう。私は胸をなでおろした。<br />
　もし今日、陛下とお話しする時間がなければ、私の権限で作るしかなかった。護衛官がスケジュールを変更させれば、そのことは陛下のお耳にも入る。そうなれば、今日は朝からぎくしゃくとして、いつもどおりの日を演じることはできなくなったはずだ。<br />
　今日は朝一番から外出だった。出発までのわずかなあいだを、警護班と無駄話をして過ごす。時間がくると、玄関前の車回しに移動し、陛下のお出ましを並んで待つ。玄関にお姿が見えた瞬間、一日の仕事が始まる。<br />
　「おはよー、ひかるちゃん。今日もカッコよくてきれいだよ」<br />
　「おはようございます。私ごときがきれいなら、陛下は神々しくあらせられます」<br />
　陛下の車中での過ごしかたには、TV録画の鑑賞（たいていアニメ）、TVゲーム、読書、睡眠、私との雑談、などがある。今日は、TV録画の鑑賞だった。助手席のシートに埋め込まれたモニターを、真剣なまなざしでご覧になる。<br />
　私はそのお姿を、あまりまっすぐには見ないようにしながら、視界から外さない。仕事についたばかりのころは、こんなに長いことひとりの人間ばかり見ていたら頭がおかしくなるのでは、という気さえした。今では慣れてしまった。<br />
　見慣れた道を通り、目的地の千葉市労働会館に着く。ここは警護のしやすいロケーションで、国王の出席する催しによく使われる。今日は、高ツ石油の投資説明会がここで開かれる。陛下ご自身が投資を検討なさっているわけではない。政府がこの件に大いに肩入れしていることを、投資家たちにアピールするためのご出席だ。<br />
　国王を招くだけあって、千ロの政府からは副大臣クラスが出てきていた。ロシア語のスピーチには通訳がつく。私はロシア語がわかるので、こういう通訳は聞いていて面白い。陛下は、居眠りなさっていた。<br />
　昼食は、財団理事の茅場氏と。地方党組織の割譲派のことが主な話題になった。茅場氏によれば、割譲派の内部に温度差が広がりつつある、とのこと。それに対して陛下は、割譲派という枠にとらわれず、具体的な人物とその人間関係に注目すべきではないか、と示唆なさった。<br />
　午後は、袖ヶ浦市の図書館へ。この図書館は先月にオープンしたばかりで、今日は広報のためのご訪問だった。TVカメラが入るので、メイドの宮田さんが陛下のメイクをTV用に整える。陛下は館長とともに館内を一回りなさり、いくつか本をお手にとっては、TV映りのよさそうな適当なことをおっしゃった。陛下は、ラジオでは思うところをそのままおっしゃるが、TVではずいぶん手加減なさる。TVは編集の都合が厳しいため、お言葉は短く単純にまとめないと、ほとんど意味が通らないくらいに切り刻まれてしまう。陛下がTVよりもラジオを好まれるのには、こういう事情もあるだろう。<br />
　今日の仕事はここまでだった。帰りがけに、陛下のご希望で、木更津駅近くのアニメショップに寄ってゆく。本社は東京にあるチェーン店で、陸子陛下のために財団が誘致したと噂されている。いつ行っても繁盛している様子がないのを見ると、そういう噂が立つのももっともなことだと思える。実際は、陛下のご贔屓をあてこんで開いた店らしい。ご贔屓だけは狙いどおりにいったが、国王が贔屓にする店だからといって繁盛するほど商売は甘くない。<br />
　公邸に戻る。車中での陛下は、さきほどアニメショップでお求めになった雑誌をご覧になっていた。私はそのお姿を、視界の隅にとらえつづける。間違いなく私は、世界一、陛下のお姿を拝見している人間だ。<br />
　陛下は雑誌のページを閉じると、私に話しかけてくださった。<br />
　「月曜のネタのことなんだけどさ、大多喜町だよね。事典だと、なーんかしょぼいネタしかなかったんだけど」<br />
　陛下のおっしゃる『月曜』というのは、月曜演説のことだ。聴衆の地元民を前にして、演説地のことを褒めなければならない。国王になにも考えがなくても、官房職員が適当に仕入れてくるが、それだけでよしとなさるような陛下ではない。<br />
　「これといった名物がないのに無理をするよりは、イベントに絡めてはいかがでしょう。たとえば七五三の季節なら、子供を壇上に招かれてお祝いの言葉をおかけになれば、人々の気持ちを集めることができるでしょう」<br />
　千葉には、七五三を盛大に祝う地方が多い。<br />
　「そっか、イベントかー。来週のイベント……　うーん」<br />
　「たしか、十五夜がもうすぐでしたか」<br />
　「もしかして私、操られてる感じ？」<br />
　そうするうちに公邸に着く。<br />
　メイドたちが玄関に並んでいて、陛下をお迎えする。そのなかには緋沙子はいない。時計を見ると、緋沙子の出勤時間にはまだしばらく間があった。<br />
　私は通用口へと回る。公邸の玄関から出入りするのは、国王、客、理事だけで、ほかは通用口を使うことになっている。公邸内にある護衛官のオフィスにゆき、書類仕事にとりかかる。<br />
　護衛官はひとりで一個の省庁のようなものなので、御召車のガソリン代の伝票事務まで私がやることになっている（御召車は政府が提供している）。実際には、そういう事務は国王官房がやってくれていて、私は上がってきた書類に署名捺印するだけなのだが、それでも数が多いと馬鹿にならない手間だ。また、トラブルの報告などは、私自身が起草しなければならない。<br />
　今日は定型書類だけだったので、すぐに終わった。届いていた郵便物を調べると、内務省発行のテロ・ゲリラ活動月報があった。さっそく目を通す。私の研修は、過去10年間の月報を読むことから始まった。教官は、白書のたぐいなど１ページも読んだことのなかった私に、内務省の文書に出てくる独特の言い回しとその意味合いを教えてくれた。たとえば、「懸念すべき状態にある」という表現には、責任回避の意味合いが強い。が、具体的な誰かが「懸念を表明した」となると、その誰かが何かをしようとしている、という意味になる。<br />
　月報を読み始めてすぐに、携帯電話が鳴った。メイドの青木さんの携帯からだった。といっても、かけてきた相手は、おそらく青木さんではなく陛下だろう。陛下は携帯電話をお持ちでない。必要なときには、お側仕えの者から借りて済ませておられる。<br />
　電話をとると、案の定だった。<br />
　「ひかるちゃん、いまからこっち来れる？」<br />
　「はい。すぐに参ります」<br />
　「おねがーい」<br />
　私は読みかけの月報を机に置き、しおりを挟もうとして――そのしおりが役に立つことはないのだと気づいた。<br />
　私は、何秒間か、ぼんやりしていた。<br />
　結局、しおりは挟まなかった。私は執務室を出た。<br />
<a href="http://kaoriha.org/nikki/archives/000325.html#more">Continue</a></p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000323.html">04:30</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=323" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;25&#26085;</h2>


<div class="blogbody">
<a name="000322"></a>
<h3 class="title">本物</h3>

<p>　Windows専用の言語処理系のひとつに、HSPというものがある。</p>

<p>　HSPの機能のいくつかは、月の裏側から集めてきたらしい。不要とわかって捨てられたものを、わざわざ復活させている。たとえばC言語風のマクロだ。私見では、#defineと#ifdefは手動メモリ管理に次ぐ害悪だ。<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.492871657&type=10&subid="></script>Stroustrup『C++の設計と進化』</a>540ページより引用する：</p>
<blockquote>
  <p>マクロの定義は、環境の中や、コンパイラのディレクティブ、ヘッダファイルなど、いろんなところに潜んでいる。マクロによる置換はスコープという境界ルールを無視し、それどころか、勝手にブレースや引用符を挿入してプログラムのスコープ構造を変えてしまうこともある。（中略）その機能はあまりにも構造性を欠き侵略的なので、プログラマやメンテナ、コードを移植する人、ツールの作者などにとってつねに頭痛の種だった。</p>
</blockquote>
<p>　しかしHSPは当たった。同種のWindows専用の言語処理系のなかで、一番の大当たりになった。<br />
　なぜ当たったのか？　私はこういう世界とはまったく縁がないので、説得力のある意見をとりあえず信じることにする。私の知るかぎり、もっとも説得力のある説明は、以下のとおりだ。<br />
  　「インストーラ抜きの配布物がEXEファイル1個になる。それが本物っぽくて、いい」<br />
  　VBの配布物はEXEファイル1個にはできない。ランタイムが必要だ。Perlは、PARを使えばEXEファイル1個にすることはできるが、PARを使うにはかなりの知識が要る。その点、最初の最初から「本物っぽい」配布物が得られるHSPは、人をひきつけたのだ――配布物がEXEファイル1個になるのが「本物っぽい」と感じるような初心者を。<br />
　初心者がなにを「本物っぽい」と感じるかは、なかなかわからない。彼らは<a href="http://www.radiumsoftware.com/0604.html#060418">カーゴ・カルト</a>の世界にいる。<br />
<br />
　初心者でなくなるのは簡単だ。慣れればいい。だが慣れるだけではカーゴ・カルトからは抜け出せない。信仰しているカーゴ・カルトが、「ベスト・プラクティス」という名前になるだけだ。<br />
　<a href="http://www.genpaku.org/realprogrammerj.html">『本物のプログラマはPascalを使わない』</a>というあのエッセイは、そこの機微をよく捉えている。このエッセイによれば、本物のプログラマはFORTRANを使うのだという――FORTRANは当時のカーゴ・カルトだったのだろう。EXEファイル1個の配布物が「本物」であることと、FORTRANが「本物」であることのあいだには、大した違いはない。<br />
　さて、今日の本題に入ろう。ネイティブ・コンパイラ（ネイティブに実行可能なバイナリ・ファイルを生成するコンパイラ）を信仰するカーゴ・カルトについて。<br />
<br />
　基本を確認しよう。<br />
　C言語のコンパイラはC言語で書ける。C言語で書かれたCコンパイラは、自分自身をコンパイルできる。<br />
　問題は、最初の実行だ。世界で初めてC言語の処理系を書いたのなら、ご愁傷様だ――手作業でなんとかするしかない。だが、ほかにC言語の処理系がすでに存在していて使えるなら、手作業は必要ない。<br />
　さて応用である。<br />
　JITコンパイル型のJava VMは、自分自身を実行できる。<br />
　事の本質はCコンパイラとなにも変わらない。「最初の実行」という問題が、VMを起動するたびに起こるだけだ。なんらかの方法で起動しさえすれば、あとはVMが自分自身を実行する。起動方法としては、インタプリタ型のJava
VM（速度は非常に遅くていい）などが考えられる。そしてその起動用VMも、FORTHインタプリタのような極小のVM上で動かすことができる。最小限のFORTHインタプリタは非常に簡単に書けるので、アセンブラさえいらないくらいだ。<br />
　高度な動的最適化は、理論上も現実にも、コンパイル時最適化をしのぐ。ある程度以上のメモリのある環境なら、ネイティブに実行可能なバイナリは、BIOSとブートローダとカーネルのごく一部にしか必要でない。ネイティブ・コンパイラはほとんど不要だ。<br />
　（ただし、ネイティブでないコンパイラは相変わらず必要だ。コンパイル時の型チェックはプログラマを助け、冗長性の低いバイトコードは実行効率を高める）<br />
<br />
　EXEファイル1個の配布物。FORTRAN。ネイティブ・コンパイラ。<br />
　どれも、ある条件のもとでは、ベストな選択だ。だが、その条件を判断する知識が抜け落ちたとき、その選択はカーゴ・カルトになる。<br />
　このようなカーゴ・カルトを見分けるキーワードが、「本物」だ。<br />
　なにかを選ぶとき、それが「本物」だからという理由で選んではいないか。なにかが確かだと思うとき、その根拠がどこかで「本物」につながってはいないか。<br />
　選ばれて「本物」になる。確かだと思われて「本物」になる。だが、その逆は、カーゴ・カルトだ。</p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000322.html">23:46</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=322" onclick="OpenComments(this.href); return false">Comments (3)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;23&#26085;</h2>


<div class="blogbody">
<a name="000321"></a>
<h3 class="title">今後のOSに望むこと</h3>

<p>　新しいOSを作ることが流行らなくなってから、長い年月が過ぎた。<br />
　念のため言っておくが、Linuxは新しくない。そしてWindowsも新しくない。どちらもC言語をベースにした、UNIXもどきのOSだ。1973年でOSの時間は止まった。いまも私たちはそこにいる。<br />
　おそらく私が生きているあいだには、OSは漸進的にしか進歩しないだろう。どのように進歩するかを、私の願望という形で予想してみる。</p>

<p>　<br />
　Java VMや.NET CLRを、カーネルに入れてほしい。もちろん、インタプリタでは話にならない。動的コンパイルされたコードが、カーネルモードで動かせるようになってほしい。メリットは以下のとおりだ。<br />
<b>・カーネルモードで動くコードを、かなり安全かつ簡単に書ける</b><br />
　Microsoftも、糞ドライバに青筋を立てるよりは、C#でドライバを書かせたほうがいい。というか、C言語で書かされるこちらも青筋を立てている。<br />
<b>・OSに依存しないドライバが可能になる</b><br />
　現在、ドライバはOSごとに違う。実用的な仮想マシンはOSよりも少ない（事実上2つしかない）ので、仮想マシンごとに違うほうがマシだ。また、一つのOSで同時に複数の仮想マシンを実行することもできる。<br />
<b>・カーネルモードとユーザモードの境界が柔軟になる</b><br />
　LinuxにはkHTTPdというものがある。これはHTTPのリクエストをカーネルモードで処理して高速化する（とはいえ現在の実装は、Apacheに比べれば速い、というレベルらしいが）。また、昔のLinuxでは、NFSサーバはユーザモードで動作した。現在ではカーネルモードで動いている。これも性能を出すためだ。<br />
　Windowsにも同様の事情がある。NT系列は、4.0まではディスプレイドライバはユーザモードだったが、4.0以降はカーネルモードになった。また、IISの6.0以降は、kHTTPdと同様のことをしている。<br />
　これらのカーネル化には批判が多い。カーネル化で得られる性能を、すべての人が必要としているわけではないからだ。もちろん純粋なマイクロカーネルもやりすぎだ。では、どうやって線引きすればいいのか？<br />
　そもそも、OSが線引きすること自体が間違っている。<br />
　カーネルモードとユーザモードの境界を、OSが決めるべきではない。決めるのはアプリケーションであるべきだ。アプリケーションは、必要とあれば気軽にカーネルモードを使えるべきだ。<br />
　<br />
　分散アプリケーションでOSのユーザ認証を使えるようにしてほしい。<br />
　ユーザ登録と認証のあるWebアプリを作ったとしよう。Webメールなどだ。そのユーザ認証を、OSの機能で行うだろうか。WebアプリのユーザごとにOSのユーザアカウントを作成する――そんなことをするだろうか。おそらく、しない。だがWebアプリのユーザは、OSの管理下にある資源を使っている。<br />
　ということは、Webアプリのユーザは潜在的に、過大な権限を与えられている。別の見方をすれば、Webアプリはユーザ認証と資源管理を独自実装している。「暗号を独自実装してはいけない」というのは常識だが、「ユーザ認証を独自実装してはいけない」「資源管理を独自実装してはいけない」というアドバイスはまだ聞いた覚えがない。しかしこれらは明らかに、独自実装するには危険な代物だ。<br />
　WebアプリでOSのユーザ認証を使えるようになったとしても、RDBMSは？　それもOSのユーザ認証と一本化する。RDBMSは分散アプリケーションだ。<br />
　<br />
　これらはすべて斬新的な進歩だ。「ゼロからHaskellで書き直せ」とか「CPUのアーキテクチャから作り直せ」といったドラスティックな進歩はいくらでも考えられる。実装することもできる。しかし、それ以上のものにはならないだろう。<br />
　斬新的にしか進歩しない世界でも、やることはたくさんあるし、C言語のコードを完全に消滅させることさえも夢ではない。ある日気がつくと、C言語のコンパイラがいらなくなっていた――そんな日が来るはずだ。</p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000321.html">00:18</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=321" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;22&#26085;</h2>


<div class="blogbody">
<a name="000320"></a>
<h3 class="title">1492:49</h3>

<p>　ネタ切れのため設定の話をする。設楽ひかるが仕事中につけている腕時計について。<br />
　ブランド指向のかたには悪しからずだが、オーデュマ・ピゲだのパテック・フィリップだのではなく、日本製のソーラー電波だ。アナログ3針、レディースサイズ、ガワとベルトはステンレス。つけている腕は左腕、フェイスは内側に向けている。<br />
　全身バリタチ風味な支度のなかで、髪と腕時計だけがフェミニン、という趣向である。</p>

<p>　<br />
　　　　　　　　　　　　　　　　　　　　　　　＊<br />
　<br />
　私は朝食を職員寮の食堂でとる。私に出される食事は、護衛官専用と銘打ってあり、食材は陛下のお食事と同じだという。調味料や食器で差がつくので、陛下のお食事と同じ味とはいかないが、それでも、自炊する気がなくなるほどおいしい。<br />
　寮の住人は8人、勤務シフトは別々だ。誰かと食事の時間が重なることは少ない。今朝も私は食堂にひとりだった。<br />
　食べ終わり、お茶を飲みながら一息ついていたとき、<br />
　「みーっけ」<br />
と、後ろから、腕を首に回された。<br />
　「美園さん、おはようござ――ぐ」<br />
　美園は回した腕を関節技に使い、私の首を締め上げる。<br />
　「ひかるさん、おはよう。同伴出勤しようか」<br />
　そう言って腕を外すと、今度は私の手をとった。そのまま食堂の出口へとひっぱってゆこうとしたので、<br />
　「お膳を戻さないと――」<br />
　「松本さーん、急ぐから、お膳ここに置いとくよ、ごめーん」<br />
　厨房から「あいよ」という返事がくる。<br />
　ひっぱられるままに職員寮を出ると、私は訊ねた。<br />
　「いったいどうしたんですか？」<br />
　すると美園は立て板に水の調子でまくしたてた。<br />
　「悩んでんの。まあ聞いてよ。<br />
　ひさちゃんがクビだっていうじゃない？　万歳よ。といっても私は大人だからさ、ひさちゃんのこと好きなひかるさんの前では、残念そうな顔してあげてもいいよ。でも、まだ一週間経ってないからね。このあいだの屈辱、まだ忘れてないから、今日は万歳で許してよ。<br />
　このあいだの屈辱のことだけど、あれで私は負けたと思ったの。陸子さまはひさちゃんをネタにして徹底的にひっぱって遊ぶんだろうなって思ったし、それだとひさちゃんをクビにするわけないでしょう。こんなクソガキが陸子さまに大ヒットするなんて、って思いながら顔つきあわせて働くわけ。まったくこりゃ屈辱よ！　それをたった一週間で忘れてあげるっていうんだから、私って大人だよね。<br />
　ええと、なんだっけ？　ああ、そうだ。<br />
　ひさちゃんがクビになるわけない、でもクビになった。どういうこと？<br />
　もしかしてひかるさん、ひさちゃんとセックスしてみたら合わなくて嫌になって、それでひさちゃんがネタにならなくなってクビ？　だったら最高なんだけど、まさかそんなんじゃないよね。<br />
　考えてもわかんないから、いったいなにが起こってんの？　って聞きたいわけなんだけど、まだ答えないでね。<br />
　もしかしてこれ、私が事情を知っちゃうと、ヤバいことなんじゃない？<br />
　根拠はないんだけど、ただの勘なんだけどね、なんかこれ、もし私が知ったら、それが影響して悪いほうに転がっていくんじゃない？　ひかるさんと陸子さまとひさちゃんと、三人しか知らなければ大丈夫、っていうか、このままひさちゃんがクビになっただけで終わるのに、もし私が知っちゃったら、私までクビになったりとか、陸子さまのご威光に傷がついたりとかしない？<br />
　そのへんよーく考えてから、答えて。いったいなにが起こってんの？」<br />
　これだけ全部を一息に言われて、私は頭がぐらぐらした。そのせいか私は関係ないことを思いついて、口にした。<br />
　「美園さんは本当に、平石さんのことが嫌いなんですか？」<br />
　「あの子が私のいうこと聞くんなら、かわいがってもいいよ。かわいいところがあるってのは認める。でも今のひさちゃんだと嫌い。『私には陸子さまがついてるんだよ、あんたなんかにへいこらするかよ、へへーん』って顔してんだからさ」<br />
　「それだと私も大差ないと思いますが」<br />
　「ちがうね。ひかるさんは陸子さまのこと本当に好きでしょう。ひさちゃんは、いろいろ混じってる。強いものに媚びるみたいなところもあるし、陸子さまに見放されたら生活に困るっていう現実的な問題もあるし。そういうのは子供だからしょうがないけど、私がむかつくのもしょうがないのよ」<br />
　強いものに媚びる――権力崇拝。私は護衛官として、人々のそういう感情を嫌というほど見てきた。緋沙子にもそれがあるのだろうか。<br />
　生活問題。緋沙子は、自分の恋だけでなく、生活もかけて戦っている。『パパとママ、どっちが好き？　――ってことですか？』。その言葉が、改めて重い。<br />
　「……私の知っている平石さんと、美園さんの知っている平石さんは、少し違うようですね」<br />
　「え、私、ひさちゃんの悪口とか吹き込んでる？　吹き込んでるねえ。ほら私、ひさちゃんのこと嫌いだから、言っちゃうわけよ。できれば私だって、ひかるさんの見てるような、きらきら輝いてるひさちゃんを見たいもんだけど。<br />
　そうだ、きょう会ったら、『うちの子にならないか』って誘ってみようかな？　すごいツンデレかましてくれるかも？　いいなあ。やらないけどさ。ダンナに無断で養子は取れないわ」<br />
　通用門の詰所の警官が、私に敬礼した。私はつかまれていた右手を振りほどいて答礼する。その右手を、またすぐにつかまれる。<br />
　そのころようやく考えがまとまってきた。<br />
　「今回のことは、悪いことばかりではないと思うんです」<br />
　「あら大人発言」<br />
　美園の皮肉にはとりあわず、私は続けた。<br />
　「平石さんは誰かが守ってあげるべきです。その役目を引き受けるおつもりが陛下にないのなら、いっそ離れてしまったほうがいいでしょう。でなければ平石さんは、いつまでも期待しつづけて、裏切られつづけるだけです」<br />
　私の手をつかんでいる指の温度が、急に下がった。<br />
　「――ひかるさん、私はなーんにも聞かなかった。聞こえなかった。<br />
　さっきの養子のことだけど、けっこう真剣に考えてるの。あのひさちゃんが私にデレデレしまくるって思ったら、こりゃ、おいしいわ。私はひさちゃんを独占したいわけじゃないから、ほかに好きな人がいたって別にいい、っていうかそのほうが楽だ。<br />
　ひさちゃんだって、お父さんが欲しいんじゃない？　うちのダンナも出来はよくないけど、ひさちゃんに手を出す度胸はないね。お父さんだけじゃなくて、弟もいるし、おじいちゃんもいるし……<br />
　……もうちょっと、優しくしとけば、よかったな」<br />
　自分が言っていることの現実味のなさに、嫌気がさしたのだろう。最後はひとりごとだった。<br />
<a href="http://kaoriha.org/nikki/archives/000323.html#more">Continue</a></p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000320.html">00:17</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=320" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;21&#26085;</h2>


<div class="blogbody">
<a name="000319"></a>
<h3 class="title">少コミを読む（第3回）</h3>

<p>　少コミ第14号を読んだ。<br />
　新連載ラッシュである。第12号から1本、第13号から2本、この第14号から2本。予告によれば第15号から2本、そして第16号から少なくとも1本。ほとんど総入れ替えだ。<br />
　これだけ一度に始めれば、半分はすぐに打ち切りだろう。どれがどんな順番で打ち切られるかが注目である。現在の予想は以下のとおり。<br />
　<br />
少コミ新連載打ち切りレース：2006年第14号（6月20日発売）<br />
◎　山中リコ『桃色パンチ』<br />
○　悠妃りゅう『すぺしゃる・ダーリン』<br />
△　車谷晴子『美少年のおへや。』<br />
　<br />
　さてレビューにいこう。</p>

<p>　<br />
・しがの夷織『めちゃモテ・ハニィ』新連載第1回<br />
　主人公に特殊な行動パターンがある。すなわち、好みの男を見ると逆上して、性暴力に及ぶ。逆上が収まると、事のヤバさに耐えられず逃走する。この行動パターンに妨げられて今まで男ができなかったが、逆上と逃走のサイクルにもめげない男とついに出会った――という第1回である。<br />
　よい点として、ネームがよく練れている。気になる点として、彼氏役に味わいが欠ける。男が味気ないのは少コミ全般に共通する欠点だが、しがの夷織は少コミの中ではだいぶ腕の立つほうだ。この強みを生かさないと、面白くするのは難しいだろう。<br />
　採点：★★★☆☆<br />
　<br />
・水波風南『蜜×蜜ドロップス』連載第43回<br />
　次回最終回だというのに、「彼氏のご家族に認められるために頑張りました・なんとか乗り切れました」に終始している。<br />
　そういえば、『小悪魔カフェ』の次回最終回もかなり辛かった。次回最終回というのは難しいものなのかもしれない。<br />
　採点：★☆☆☆☆<br />
　<br />
・車谷晴子『美少年のおへや。』連載第2回<br />
　あらすじ：百合オチ。ほかにはなにもない。<br />
　ネームは前回よりは頭に入るが、これは私が百合オチをたくさん読んでいるせいかもしれない。<br />
　採点：★★☆☆☆<br />
　<br />
・山中リコ『桃色パンチ』新連載第1回<br />
　面白いまんがはみなそれぞれ違っているが、つまらないまんがはお互いによく似ている。共通点のひとつが、「共感することを禁じられた悪役」だ。<br />
　TVの時代劇の悪役には共感できる。彼らはみな色と金を求めている。色と金に共感できないほどの聖人は、おそらくTVなど見ない。<br />
　だが一体どういうわけか、つまらないまんがの作者は、別の道をゆく。悪役に共感するのは絶対にいけないと思い込んでいるのかもしれない。それにしても、いろいろな方法があるだろう。<br />
・そもそも悪役を出さない<br />
・「規則だから」「命令だから」で行動するロボットのような奴<br />
・「宇宙人が電波で俺を操ってるんだ」というような気違い<br />
　だが一体どういうわけか、まるで判で押したように、「共感することを禁じられた悪役」を出す。<br />
　理由はわからない。もしかするとそれが一番簡単なのかもしれない。安易な道をゆくのが好きなら、まんが家のような茨の道はとうていお勧めできないが。<br />
　この作者が、まんが家として成功する可能性は、万に一つもないと断言する。<br />
　採点：☆☆☆☆☆<br />
　<br />
・咲坂芽亜『ラブリー・マニュアル』連載第2回<br />
　あらすじ：主人公が「好き」と言ったとたん、彼氏役がなびいてきた。<br />
　前回も今回も、主人公は「モテ」のために学校側と衝突している。2回続けてやったからには、なにか重要なことなのだと思うが、扱いが小さい。伏線かもしれない。<br />
　「モテ」は体制的な価値だ。学校も体制だ。だから、主人公が学校側と衝突するのは、2つの体制のあいだの代理戦争といえる。空虚ですさんだ戦いなのに、どうも作者にはそのことがわかっていないように思える。<br />
　さて余談だが、体制とはどんなものか？<br />
　体制はイメージをふりまく。学校という体制は、「勉強がよくできれば幸せになれる」というイメージをふりまく。モテという体制は、「いい男をつかまえれば幸せになれる」というイメージをふりまく。ソ連共産党という体制は、「よく働けば幸せになれる」というイメージをふりまく。体制のふりまくイメージのなかでは、各個人の事情はまったく考慮されない。<br />
　体制は約束を与えない。約束を破りつづける人は信用をなくすが、体制は約束を与えない。だから反例をいくら積み上げても、体制のふりまくイメージは汚れない。「勉強がよくできたのに不幸になった」「モテたのに不幸になった」という反例は、体制にはなんの影響も及ぼさない。<br />
　採点：★☆☆☆☆<br />
　<br />
・くまがい杏子『お天気注意報・』読み切り<br />
　主人公が留年寸前のピンチ、それを助けてくれる秀才の彼氏役、という話である。<br />
　いろいろ光っている。ネームの流れもいいし、画力も確かだし、彼氏役（メガネくんだ）も流麗にかわいく描けている。そしてなにより、魅力がある。16号から連載が始まるらしい。楽しみだ。<br />
　採点：★★★★★<br />
　<br />
・新條まゆ『愛を歌うより俺に溺れろ！』連載第10回<br />
　ブラック秋羅の悪行の現場にたまたま踏み込んでしまった水樹が、悪行を止めさせる。ブラック秋羅の悪っぷりに怯えつつも惹かれてゆく水樹――ではなく、そこはあっさり流して、普通にいちゃいちゃしている。<br />
　さすが新條まゆ！　おれたちに思いつかない事を平然と描いてのけるッ　そこにシビれる！　あこがれるゥ！　……と言いたいところだが、さすがにこれは新條ワールドに入れない。ブラック秋羅の悪はかまわないが、それへの水樹の反応があまりにも辛い。<br />
　採点：★☆☆☆☆<br />
　<br />
・池山田剛『萌えカレ!!』最終回<br />
　（「クララが立った！」風に）新が勝った！<br />
　というわけで私の予想（というか願望）が実現した。長生きすると人間いいことがあるものだ。<br />
　ラスト3回しか読んでいない私が言うのもなんだが、納得のいく最終回だった。拍手。<br />
　採点：★★★★☆<br />
　<br />
・青木琴美『僕の初恋をキミに捧ぐ』連載第21回<br />
　他に男を作ろうか――というのは叙述トリックで、真の彼女役（繭）は動いておらず、ライバル（照）の占有力の強さを思い知らされただけだった。照もここまで持ち上げられたからには、ただのダシでは収まらないだろう。今回はまだ照の強みは出てこない。「入院患者は寂しいから」と言い訳をしていたが、おそらくフェイクだ。<br />
　今回はネームがぎこちない。どうやら作者は、仕掛けるのはうまいが、手をつなぐのはそれほどでもないらしい。<br />
　採点：★★☆☆☆<br />
　<br />
・藍川さき『ぜんぶ、君のモノ』読み切り<br />
　ネームがあまりにもひどい。編集者は本当にこのネームにOKを出したのだろうか。1ページ目でダメとわかるネームを蹴れないとは、少コミ編集部になにが起こっているのだろうか。<br />
　採点：☆☆☆☆☆<br />
　<br />
・悠妃りゅう『すぺしゃる・ダーリン』連載第3回<br />
　「自分の男はモテる→私もモテないと愛想をつかされる」という謎の思考回路により主人公が空回りしている。<br />
　今回はネームが悪い。連載で、頭を使う時間がなくなった結果だろうか。<br />
　採点：★☆☆☆☆<br />
　<br />
　今回は付録が別冊まんがなので、それも一言ずつ。<br />
　<br />
・久遠アリス『夏色★CUTE BABY』<br />
　無難、つまり見どころがない。<br />
　採点：★☆☆☆☆<br />
　<br />
・藤原なお『ラブ・カフェ』<br />
　動機と心理の整合性がおかしい。<br />
　採点：☆☆☆☆☆<br />
　<br />
・白石ユキ『ジェントル☆マニア』<br />
　秋葉原は見て描こう。<br />
　採点：☆☆☆☆☆<br />
　<br />
・福山ゆき『キミにはナイショ』<br />
　素直な感じがする。<br />
　採点：★☆☆☆☆<br />
　<br />
・真村ミオ『その先の恋の味』<br />
　主人公が変でいい。<br />
　採点：★★☆☆☆<br />
　<br />
・天野まろん『スパイシー★レシピ』<br />
　彼氏役が『かわいいオレ様』（第12号掲載）と似たようなオレ様なのがひっかかる。<br />
　採点：★★★☆☆<br />
　<br />
<a href="http://kaoriha.org/nikki/archives/000329.html">第4回に続く</a></p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000319.html">04:52</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=319" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;19&#26085;</h2>


<div class="blogbody">
<a name="000318"></a>
<h3 class="title">末期症状</h3>

<p>　客足が遠のく一方の蕎麦屋があるとしよう。<br />
　蕎麦屋の店主は対策を考えた。<br />
1. もっとおいしい蕎麦を作って客を増やそう<br />
2. 定食の客を増やして穴埋めしよう<br />
　どちらが正道で、どちらが破滅への道か、小学生にもわかる。<br />
　<br />
<a href="http://headlines.yahoo.co.jp/hl?a=20060619-00000078-mai-bus_all">＜国産チーズ＞雪印、森永が増産へ　消費者の牛乳離れに対応</a><br />
　<br />
　どうやらこの連中は、クソまずい高温殺菌牛乳を、あくまでも売り続けるつもりらしい。<br />
　「調査によれば消費者は牛乳の味に満足している」とでもいうのだろうか。もし蕎麦屋の店主が同じことを言ったら、気違い扱いされるはずだが。</p>



<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000318.html">23:46</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=318" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;18&#26085;</h2>


<div class="blogbody">
<a name="000317"></a>
<h3 class="title">妄想型プログラミング言語</h3>

<p>　経営者がビッグなビジネスを妄想するように、プログラマは自分の設計した言語を妄想する。どちらも、なんの役にも立たないが、やめられない。<br />
　この無益な行為のなかで、面白い言語機能を思いついた。ここにメモしておく。</p>

<blockquote><code>
  <pre>public string Func()<br />{<br />    using (FileStream fs = new FileStream(&quot;test.txt&quot;, FileMode.Open))<br />    {<br />        using (StreamReader sr = new StreamReader(fs))<br />        {<br />            return sr.ReadToEnd();<br />        }<br />    }<br />}</pre>
</code></blockquote>
<p>　よくあるC#のコード片だ。<br />
  　このコード片には、意味的な無駄が多い。<br />
　まず、もしC#に型推論があれば、こう書ける。</p>
<blockquote><code>
  <pre>public string Func()<br />{<br />    using (var fs = new FileStream(&quot;test.txt&quot;, FileMode.Open))<br />    {<br />        using (var sr = new StreamReader(fs))<br />        {<br />            return sr.ReadToEnd();<br />        }<br />    }<br />}</pre>
</code></blockquote>
<p>　FileStreamだのStreamReaderだのと2回書かせるのは、カナ坊の陰謀としか思えない。<br />
  　ここで重要なのは、fsもsrもその型はコンパイル時に決定している、ということだ。コンパイラは右辺の型でvarを置き換えているにすぎない。これと同様に以下の話も、実行時ではなくコンパイル時の話である。<br />
  　さて、まだ無駄がある。fsとsrだ。これらの変数名はそれぞれFileStreamとStreamReaderを省略したものだ。綴りを変えてあるだけで意味的にはこれもやはりカナ坊言葉だ。<br />
  　実は私はこのことで、かれこれ10年ほど悩んでいた。<br />
  　私は、「よい名前（クラス名、関数名、変数名、名前空間名）のつけかた」を余すところなく説いた記事や本を10年以上探してきた。しかし、ある程度までのことは書いてあるものの、余すところなく、とまでのものには出会えなかった。やがて私は気づいた。これは、ある程度以上から先は、暗黙知でしかありえないことなのだと。<br />
  　さらに進んで、こういう結論に達した――プログラミングから計算機科学を引き算すると、「よい名前」が残る。<br />
  　設計や言語のよさは、よい名前をもたらすかどうかで測られる。よい名前についての暗黙知を持たないプログラマは、よいプログラマではありえない。つまるところ、「よい名前」こそプログラミングの極意だ。<br />
  　サンプルコードは概して、よい名前を使わない。たとえば上のコード片では関数名がFuncになっている。実際のコードではこんな関数名は使わない。<br />
  　だから私は悩んだわけだ。fsだのsrだのといった変数名は、Funcという関数名と同様、サンプルコードの世界からの悪しき流入であり、本当はもっとよい名前をつけられるのではないか？<br />
　だが私はついに発見した。これもやはりカナ坊の陰謀だ。こう書けるべきなのだ。</p>
<blockquote><code>
  <pre>public string Func()<br />{<br />    using (var = new FileStream(&quot;test.txt&quot;, FileMode.Open))<br />    {<br />        using (var = new StreamReader(FileStream))<br />        {<br />            return StreamReader.ReadToEnd();<br />        }<br />    }<br />}</pre>
</code></blockquote>
<p>　ある変数スコープ内で、ある型の変数が1個しかありえないことが自明である、というケースは非常に多い。変数名のかわりに型識別子でバインドされる変数があっていい。上の例では、変数宣言から変数名を省略することで、そのような変数を宣言している。<br />
　こういう変数を、仮に「型バインド変数」と名づける。<br />
<br />
　クラスのメンバ変数にも型バインド変数は必要だ。ただしこの場合、メンバ関数内では、メンバ変数と同じ型あるいは親子関係にある型の型バインド変数の宣言を禁止すべきだ。つまり、こういう書き方はコンパイルエラーになるべきだ。</p>
<blockquote><code>
  <pre>class MyClass<br />{<br />    FileStream;<br /><br />    public string Func()<br />    {<br />        using (var = new FileStream(&quot;test.txt&quot;, FileMode.Open))<br />        {<br />            using (var = new StreamReader(FileStream))<br />            {<br />                return StreamReader.ReadToEnd();<br />            }<br />        }<br />    }<br />}</pre>
</code></blockquote>
<p>　親子関係にある型も禁止、つまり、どちらのFileStreamをStreamに置き換えてもやはりコンパイルエラーになるべきだ。<br />
　型バインド変数は、ある変数スコープ内である型の変数が1個しかありえないことが自明、というケースのためのものだ。変数スコープが上書きされるケースや、親子関係にある型が2つ出てくるケースは自明とはいえず、型バインド変数の出番ではない。（なお、型バインドのメンバ変数に代入するときは、左辺をthis.FileStreamと書く）<br />
<br />
　これだけで話が終われば平和で些細な言語機能なのだが、実はお楽しみはこれからだ。<br />
　型バインド変数はその変数スコープと特殊な関係にある。そして、上のコード片で、ReadToEnd()というメンバ関数がある型バインド変数はStreamReaderだけだ。<br />
　だから、こう書けていい。</p>
<blockquote><code>
  <pre>public string Func()<br />{<br />    using (var = new FileStream(&quot;test.txt&quot;, FileMode.Open))<br />    {<br />        using (var = new StreamReader(FileStream))<br />        {<br />            return ReadToEnd();<br />        }<br />    }<br />}</pre>
</code></blockquote>
<p>　つまり、関数の名前空間に、thisのメンバ関数だけでなく、型バインド変数のメンバ関数も含める。これを仮に、「関数名前空間の拡張」と呼ぶ。<br />
  　阿鼻叫喚の渦を巻き起こす超Perl級の言語機能に見える。しかし角を取る方法はいくらでもある。変数宣言時にimplicit指定子を要求するなどだ。それに、フールプルーフは実際に馬鹿を観察しないことには論じられない。先に進もう。<br />
　ローカル変数と同様、型バインドのメンバ変数のメンバ関数も、名前空間に含まれる。ちょっとクラス継承（実装継承）に似た働きをするわけだ。ではもっとクラス継承らしくしてみよう。以下のようなキャスト演算子を、デフォルトで定義するのだ。この機能を仮に、「デフォルトのキャスト演算子」と呼ぶ。</p>
<blockquote><code>
  <pre>class MyClass<br />{<br />    public FileStream;<br />    ...<br />    public static implicit operator FileStream(MyClass mc)<br />    {<br />        return mc.FileStream;<br />    }<br />}</pre>
</code></blockquote>
<p>　一目瞭然だが、このMyClassのインスタンスをFileStreamにキャストして得られたインスタンスは、MyClassに戻すことはできない。しかし、そもそもダウンキャストは型システムの抜け道だ。そのためC#でもJava言語でも、ダウンキャストは明示的に指定しなければならない。ダウンキャストを前提に設計することは滅多にない。<br />
　ダウンキャストがどうしても必要なら、以下のように書ける。これは、ダウンキャストをデフォルトで提供するよりは、ずっと合理的なはずだ。</p>
<blockquote><code>
  <pre>class MyClass<br />{<br />    public MyFileStream;<br />    class MyFileStream : FileStream<br />    {<br />        public MyClass;<br />        public MyFileStream(string, FileMode, MyClass mc) : base(string, FileMode)<br />        {<br />            this.MyClass = mc;<br />        }<br />    }<br />}</pre>
</code></blockquote>
<p>　ダウンキャストを例外として考えると、こんな考えが浮かぶ――こうしてみるとクラス継承のほうがむしろ、言語機能として一般性に欠けるのでは？<br />
  　そもそもクラス継承を悪だとする議論は古くからある。この煽りを食って、Java VMと.NET CLRは多重クラス継承ができなくなってしまった。単一クラス継承が残されたのは、必要悪ということだろう。多重クラス継承が悪で単一クラス継承が善なのではない。「複数は耐えがたいが1個なら耐えられる」という妥協が、単一クラス継承の本質だ。<br />
  　しかし私に言わせれば、多重クラス継承をなくしたことで、重要なものまで失われた。デザインパターンでいうコンポジションで、委譲のためのコードを書いたことがある人なら、わかるはずだ。委譲のためのコードとは、およそ非人間的なコピペだ。<br />
　では、そもそもクラス継承のメリットを、継承以外の手段で提供すればいい。型バインド変数＆関数名前空間の拡張＆デフォルトのキャスト演算子なら、それができる。<br />
<br />
　まとめ。<br />
　ある変数スコープ内で、ある型の変数を1個しか使わないことが自明、というケースがある。そのような変数のために、変数名のかわりに型識別子でバインドするという言語機能を考える。そのような変数を、型バインド変数と呼ぶ。<br />
　型バインド変数は、ローカル変数だけでなく、メンバ変数としても宣言できる。<br />
　関数の名前空間に、型バインド変数のメンバ関数を含める。この機能を、関数名前空間の拡張と呼ぶ。<br />
　型バインドのpublicなメンバ変数があるクラスは、その型へのキャスト演算子をデフォルトで備える。キャスト演算子を使うことで、その型でバインドされているメンバ変数が得られる。この機能を、デフォルトのキャスト演算子と呼ぶ。<br />
　型バインド変数＆関数名前空間の拡張＆デフォルトのキャスト演算子によって、クラス継承の機能を肩代わりできる。これはクラス継承の問題点を避けながら利点を得られ、さらに利点をより使いやすくしている。<br />
<br />
　さて、こんな機能が実装された言語を使える日は来るのか？　ありえない。<br />
　というわけでこれを、「妄想型プログラミング言語」と名づける。</p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000317.html">06:08</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=317" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;17&#26085;</h2>


<div class="blogbody">
<a name="000316"></a>
<h3 class="title">1492:48</h3>

<p>　とっくの昔にお忘れかもしれないが実はこれはSSなので、この欄だけでもSSらしくしてみたい。<br />
　<br />
緋沙子「道を誤ったのだよ。貴様のような攻めキャラのなりそこないは粛清される運命なのだ、わかるか！」<br />
陸子「まだだ、まだ終わらんよ！ 」<br />
　<br />
　これでだいぶSSらしくなったと思う。<br />
　（なにか誤解があるらしい）</p>

<p>　<br />
　　　　　　　　　　　　　　　　　　　　　　　　　＊<br />
　<br />
　繰り返すこと。<br />
　親に虐待されて育った人は、自分の子を虐待するようになりやすい、と言われる。陛下がなさっていることも、そのようなものかもしれない。<br />
　――そう考えて私は、自分の頬を、手で覆った。陛下に平手打ちされたことを思い出して。<br />
　こうして物事は、よいことも悪いことも、繰り返すのかもしれない。それが文化とか、階級とか、民族になるのかもしれない。<br />
　でも、同じことを繰り返すのではない。カール・マルクスいわく、『歴史は繰り返す。ただし、一度目は悲劇として、二度目は茶番として』。一度起こったのと同じことは、二度と起こらない。<br />
　陛下がなさっていることも、陛下ご自身が受けた仕打ちと同じようでいて、実はまったく違う。<br />
　生まれて間もないうちに捨てられた陛下は、自分が捨てられたことを体験なさっていない。陛下は、事が終わってしまったあとで育ち、物心がつき、自分の生い立ちを知り、そしておそらくは、捨てられるという体験を、空想なさった。<br />
　その空想はどんな色をしていただろう。<br />
　いまはごく現実的な陛下も、幼いころには、生みの母親のことを優しく美しく思い描かれたのだろうか。ご自分が捨てられたことも、その優しさゆえの悲劇として、薔薇色に空想なさったのだろうか。<br />
　気持ちの沈んでいる日には、わざわざ憎むまでもないような下劣で愚鈍な女を、思い描かれたかもしれない。自分が捨てられたことも、ごくつまらない灰色の出来事だったと、自分自身に言い聞かせておられたかもしれない。<br />
　よほど薔薇色の空想でも、いまの緋沙子の現実ほどきらびやかではない。<br />
　母親を演じるのは、美しく賢い千葉国王。陸子陛下ほど豪華な母親を思いつくのは難しい。緋沙子を捨てるのは、けちな愚かさや運命のせいではなく、自分の欲望のため。その緋沙子も、哀れまれるだけの無力な赤ん坊ではなく、悲劇の主人公にふさわしい強さと気高さを備えている。<br />
　そして、緋沙子が捨てられても、結局はそれほどひどいことにはならない。緋沙子には、赤ん坊とちがって、ひとりで生きていけるだけの力がある。陛下も金銭面では緋沙子を支えてくださるだろう。緋沙子は、赤ん坊とちがって、自分というものを持っている。それはこの悲劇のあとも、さほど傷つかずに残るだろう。<br />
　陛下がどういう事情で捨てられることになったのか、私には知る由もない。けれど、どんな事情だったにせよ、これだけは間違いない――いまの緋沙子の現実のほうが、ずっといい。<br />
　<br />
　繰り返すこと。<br />
　陛下は、生みの母親にされた仕打ちを、緋沙子に向かって繰り返している。けれど、繰り返しているのは同じことではない。それは一度目とは比較にならないくらい、美しく、鮮やかで、甘い。<br />
　<br />
　私はできればよい人間でありたい。けれど私は天使のようになりたいとは思わない。自分のだめなところをすべて切り捨てて、完璧な人間になりたいとは思わない。私は美しい姿でありたいから化粧をする。けれど自分の顔を、天使の顔と取り替えてしまいたいとは思わない。それと同じことだ。<br />
　自分の顔を取り替えたくないように、陛下のお顔が天使のようであってほしいとも思わない。<br />
　陛下のお顔と同じく、お心も天使のようではなく、緋沙子を捨てようとなさる。<br />
　<br />
　繰り返すこと。<br />
　自分がされたことを人にしてしまうとき、一度目よりも、甘く美しくする。<br />
　陛下のなさっていることは、悪い。けれどそこには、人間の素晴らしい力が発揮されている。天使ではなく、よい人間であるための力、悪いけれど、よいものが。<br />
　<br />
　もし陛下のなさることが本当に間違っていれば、私は必ずお止めする。私にはそれができる。陛下をお守りすることが私の役目なのだから、陛下ご自身の過ちからも、お守りする。<br />
　緋沙子を捨てることのなかにある、悪いけれど、よいものが、私をそこまでゆかせない。陛下にとって悪いことだと、心の底から信じることができない。これでは、陛下をお止めできない。<br />
　なら、心の底から信じることをしよう。<br />
　信じること――私が緋沙子を守る。<br />
　私が陛下のかわりになれるはずもないから、私なりのやりかたで、緋沙子を守る。そんなことができるのかどうかも知らない。けれど、決意することは、信じることだ。<br />
　<br />
　繰り返すこと。<br />
　『私とは会えなくなってもいい？』<br />
　それは一度目よりも甘く美しいだろうか。おそらく、きっと。<br />
　けれど。<br />
<a href="http://kaoriha.org/nikki/archives/000320.html#more">Continue</a></p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000316.html">02:58</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=316" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;14&#26085;</h2>


<div class="blogbody">
<a name="000315"></a>
<h3 class="title">汝のコンパイラを愛せよ</h3>

<p><p>　まずはこちらをご覧いただきたい――<a href="http://local.joelonsoftware.com/mediawiki/index.php/間違ったコードは間違って見えるようにする">『間違ったコードは間違って見えるようにする』</a></p><br />
<p>　アプリケーションハンガリアンはコンパイラの関知しないところにあるので、コンパイルエラーを出してくれない。しかしC#なら、アプリケーションハンガリアンをやめて、型を使う方法がある。</p></p>

<blockquote>
<pre><code>using System;
<br />namespace MyNS<br />{<br />    struct Int32Derivative&lt;T&gt;<br />    {<br />        private Int32 val;<br />        public static Int32Derivative&lt;T&gt; operator +(Int32Derivative&lt;T&gt; left, Int32 right)<br />        {<br />            return new Int32Derivative&lt;T&gt;(left.val + right);<br />        }<br />        public static Int32Derivative&lt;T&gt; operator -(Int32Derivative&lt;T&gt; left, Int32 right)<br />        {<br />            return new Int32Derivative&lt;T&gt;(left.val - right);<br />        }<br />        public static Int32 operator -(Int32Derivative&lt;T&gt; left, Int32Derivative&lt;T&gt; right)<br />        {<br />            return left.val - right.val;<br />        }<br />        public static Int32Derivative&lt;T&gt; operator *(Int32Derivative&lt;T&gt; left, Int32 right)<br />        {<br />            return new Int32Derivative&lt;T&gt;(left.val * right);<br />        }<br />        public static Int32Derivative&lt;T&gt; operator ++(Int32Derivative&lt;T&gt; left)<br />        {<br />            return new Int32Derivative&lt;T&gt;(left.val++);<br />        }<br />        public static Int32Derivative&lt;T&gt; operator --(Int32Derivative&lt;T&gt; left)<br />        {<br />            return new Int32Derivative&lt;T&gt;(left.val--);<br />        }<br />        public Int32Derivative(Int32 a)<br />        {<br />            val = a;<br />        }<br />    }<br />}</code></pre>
</blockquote>
<p>　型Tはダミーだ。</p>
<p>　Int32Derivativeを使うと、このように書ける。</p>
<blockquote>
<pre><code>using System;
<br />namespace MyNS<br />{<br />    using RowIdx = Int32Derivative&lt;RowIdxStub&gt;;<br />    using ColIdx = Int32Derivative&lt;ColIdxStub&gt;;
<br />    class RowIdxStub<br />    {<br />        // nothing<br />    }<br />    class ColIdxStub<br />    {<br />        // nothing<br />    }
<br />    class Program<br />    {<br />        static void Main(string[] args)<br />        {<br />            RowIdx ir = new RowIdx(0);<br />            RowIdx ir2 = ir + 10;<br />            int diff = ir - ir2;
<br />            ColIdx ic = new ColIdx(200);<br />            ic++;<br />        }<br />    }<br />}</code></pre>
</blockquote>
<p>　RowIdxとColIdxのあいだの演算や型変換がコンパイルエラーになるのはもちろん、RowIdx同士・ColIdx同士の足し算も失敗する。そしてRowIdx同士・ColIdx同士の引き算はちゃんとintを返す。</p>
<p>　なお、私はこの手法を思いついただけで、実際に使ったことはない。あしからず。</p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000315.html">21:10</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=315" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>





<div class="blogbody">
<a name="000314"></a>
<h3 class="title">ソ連の復活</h3>

<p><a href="http://www.itmedia.co.jp/news/articles/0606/13/news057.html">会員2000人に電話でアンケート調査を行い、8割以上から「遮断サービスが必要」との回答を得る</a><br />
　<br />
　このやりかたのソ連臭さを、どう説明したものだろうか。おそらくローレンス・レッシグが解説してくれると思うので、それを待ちたい。</p>



<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000314.html">02:08</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=314" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;13&#26085;</h2>


<div class="blogbody">
<a name="000313"></a>
<h3 class="title">『Ajax イン アクション』は糞本だ</h3>

<p>　<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.491068834&type=10&subid="></script>Dave Craneほか著『Ajax イン アクション』</a>（インプレスジャパン）を8割がた読んだ。<br />
　突然だが、戦場は4つの基本的な要素でできている。<br />
・飢え<br />
・埃<br />
・糞<br />
・シラミ<br />
　これだけは絶対に忘れないでほしい。飢え、埃、糞、シラミだ。<br />
　これらの四大要素があまり目立たない戦場も、ごく一部にはある。米軍の力はあらゆる不可能を可能にするらしく、毎日シャワーを使うことさえあると聞く。だがそういう恵まれた環境は例外だ。戦場は四大要素でできている。四大要素があるのではなく、四大要素でできている。24時間、四大要素のなかで暮らすのだ。<br />
　さて私の経験によれば、Ajax開発は、戦場の暮らしに少しだけ似ている。こちらの四大要素は、多様性、非常識、情報不足、テスト困難だ。<br />
　現代のほとんどのプログラマは、こういう経験をしたことがないはずだ。匹敵するものがあるとしたら初期の携帯Javaくらいか。私は深入りしなかったが、聞くところでは、どうやら四大要素でできていたらしい。</p>

<p>　<br />
　多様性について。<br />
　「非互換性」という問題はよく知られている。だがそれは真実をごまかした表現だ。非互換性というと、まるで2つの実装のあいだで起こることのように聞こえる。だから、「多様性」と言わなければならない。Gecko系ブラウザのバージョンごとの違い、Operaのバージョンごとの違い――思い出しただけで頭痛がしてくる（ろくに思い出せないが）。しかも、私の知っていることなど、ちょっと味見した程度にすぎないのだ。<br />
　<br />
　非常識について。<br />
　どんな人間もかならず常識を持っている。「世の中にはこれとは違う常識もある」などとは夢にも思わず、まったく無自覚に信じていることがたくさんある。同様に、プログラミングの世界にも常識がある。<br />
　まず、JavaScriptという言語自体が、滅びた一族の最後の生き残りだ。JavaScriptのいくつかの機能（プロトタイプベースのOO機能やスコープチェーン）はエキゾチックに見える。しかし実は、1980年代半ばまでは、これが未来になるはずだった。あれほど将来性を感じさせていたSmalltalkが、あれほどあっけなくC++とJavaに敗れるとは、今でも信じがたい思いがする。このとき以来、「なんであれ動的なほうがいい」という考えは、仮説から信仰に変わった。いまだに「これからは動的言語」などと臆面もなく抜かす信者は有害なので全員死んでほしい――話がそれた。<br />
　滅びたとはいえかつては大きな一族だったので、そのつもりで調べれば理解できる。さあ理解した、というところでこれだ――<a href="http://p2b.jp/index.php?UID=1131336575">IEのガベージコレクタは腐っている</a>。Smalltalk系言語のガベージコレクタが腐っていて、しかも何年も修正されないままだとは、夢にも思わない。まさに非常識だ。<br />
　Ajax開発では、心の底から「ありえない」と叫ぶしかない非常識な事態に、ほとんど毎日出くわす。<br />
　<br />
　情報不足とテスト困難について。<br />
　Ajax開発では、設計は無駄だ。最小限の設計ではなく、本当のゼロ設計でいい。どんな設計も、確認された事実のほかに、常識に依存している。そしてその常識は覆される。かなりの確率で、設計がまるごと覆される。だから設計は無駄だ。<br />
　設計がなければ、行動パターンは一つしかない。<br />
　なにも考えずにテキストエディタに向かい、書けそうなところから書く。いくつかのブラウザでテストする。動かないところで頭を抱え、printfデバッグをやりまくる。問題の原因をつきとめるのではなく（追いかけてもまるで蜃気楼のようにつかまらない。おそらく常識に囚われているせいだ）、症状を回避するための小細工を弄する――まるでプログラミングを覚えて三週間目の中学生の「ハック」な行動パターンだ。Ajax開発という世界のルールが、それを強制するのだ。<br />
　このハックで得た知識をもとに、正しい設計で書き直す？　残念ながらそれは動かない。なんにせよ設計をした以上、それは必ず常識に依存しており、それは覆される（だから私はAjax用のJavaScriptライブラリに非常に懐疑的だ。prototype.jsがあれほど有名なのは、それ以上のものが作れないからではないか？）。意味のある動作をするアプリケーションなら、おそらく5回は設計をやりなおして、やっと動くようになるだろう――テストしていないブラウザで致命的なことにならないよう祈りながら。<br />
　もし、数十種類のブラウザで同時にテストしてくれる自動テスト環境があれば、物事はずっとよくなるかもしれない。ブラウザウィンドウをキャプチャして正解画像と比較し、マウスクリックもちゃんとエミュレートしてくれる環境だ。……しかし、テストケースごとに正解画像を用意する手間は？<br />
　<br />
　飢え、埃、糞、シラミ。<br />
　いかにも「お手軽にそれっぽいことを書きました」的な本なら、こうした問題に背を向けているのも、やむをえないと思える。残念ながらこの業界では本とはそういうものだ。しかし、653ページの大著が、体系的としか思えないやりかたで四大要素に背を向け、たまに触れたときにも「こういうこともありますよ、でも大したことじゃないんですよ」という態度を取るのは、当然とはいえない。糾弾されるべきことだ。<br />
　そう、私は本書を糾弾しているのだ。本書は、Ajax開発という戦場の暮らしを、まるでホテル暮らしのように見せかけている。<br />
　SafariとOperaにJavaScriptデバッガがないことが、いったいどんな苦しみか。その苦しみを和らげるテクニックこそ必要だ。その話は、なんの一般性もないトリビアの寄せ集めになるだろう。しかし、それを言わずに「デザインパターン」などとぬかす奴がのこのこやってきたら、一発お見舞いする以外にない。だから私が一発お見舞いしているわけだ。<br />
　四大要素のない健全な世界なら、私も文明人らしく優雅にデザインパターンの話に終始したい。しかしAjax開発はそうではない。もう一度繰り返す。飢え、埃、糞、シラミだ。それがAjax開発だ。</p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000313.html">04:55</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=313" onclick="OpenComments(this.href); return false">Comments (3)</a>
	
	
</div>

</div>





<div class="blogbody">
<a name="000312"></a>
<h3 class="title">少コミを読む番外編・Cheese!増刊を読む</h3>

<p>　『Cheese!』7月号増刊を読んだ。<br />
　ご存知でない諸氏のために説明すると、『Cheese!』は小学館の発行する少女まんが誌である。少コミの姉妹誌といった位置づけで、少コミより上の年齢層（中学生）をターゲットにしている。なお今回読んだのは増刊のほうであって本誌ではない。お間違えなきよう。<br />
　作品ごとのレビューはあまりにも辛いので、気になったテーマでまとめてみる。<br />
　少コミ系の少女まんがを読むかぎり、「モテ」という煽りからは逃れられない。では、「モテ」という煽りにどう向き合うか。<br />
・素直に煽られて焦る・反発する<br />
・煽りとして相対化する<br />
・作家の考えをみる<br />
　などなど、さまざまなスタンスがありうる。<br />
　今回は、「モテる方法」、モテメソッドについての作家の考えをみてみよう。これはメガネ問題への態度から読み取れる。</p>

<p>　<br />
　モテメソッド的には、メガネをやめてコンタクトにするほうがいいのか？　それとも、メガネを生かすほうがいいのか？　これがメガネ問題だ。<br />
　まずは、腰を落ち着けて、よく考えてみてほしい。<br />
　他の事情を考慮に入れず、無条件にメガネをやめてコンタクトにすればいいというのは、自分の欠点を隠そうとする態度だ。それも、メガネが実際に欠点として働くからではない。<br />
　近世・近代の売春と婚姻について、少々調べたことがある（恋愛には疎いがあしからず）。その経験から言わせてもらえば、時と場合と相手を問わず無条件に欠点として働く欠点はただひとつ、「バカ」だけだ。バカ女がモテるのはエロゲーの中だけだ。しかし少なくともこの号には、バカという欠点を隠そうとする話はない。漢字や熟語が読めなくてしょっちゅう青ざめている主人公（といっても学力が怪しいだけで頭はいい）など面白そうなのだが、そういう話はない。それに対して、メガネ問題にかかわる話は3本もある。<br />
　メガネという欠点は、現実のものではない。お手軽に隠せるからこそ欠点として認識される、いわばスケーブゴートだ。それがわかっているかどうかで、話の説得力がまるで違ってくる。<br />
　嶋木あこ『好きになるまで待って』と、河丸慎『初エッチ×LV.0』では、主人公はメガネをやめてコンタクトにすることでキレイになる。どちらでも、メガネを外すことには重点はない。メガネ＝ダサい、という安易なまんが的記号として使われているだけだ。「無条件にメガネをやめてコンタクトに」とまではいえないようにも見える。<br />
　しかし、だ。<br />
　キレイになるという高度に複雑なプロセスが、安易なまんが的記号として表現されること――このやりかたに、作家のモテメソッドへの考え方を読み取らないわけにはいかない。しかも、そのまんが的記号は、「無条件にメガネをやめてコンタクトに」という発想に立脚している。<br />
　考えれば考えるほど、メガネ問題への回答はひとつしかない。「メガネを生かすほうがいい」だ。<br />
　本はるか『欲しいの？』は、この点では、正しい態度を示している。メガネに重点を置き、メガネを外さないままで、主人公をキレイに描く。そして、「別にいんじゃん？　メガネのまんまだって」と、乙女ちっくの時代に大流行した有名手筋でまとめている。<br />
　これでいいのか？　いや、よくない。<br />
　この有名手筋、「そのままの君が好き」は、「モテ」という煽りと両立しない。そればかりか、「キレイになりたい」という願望とも両立しない。<br />
　あれほど流行した有名手筋が、どうして今は廃れてしまったのか。その理由がここにある。「モテ」という煽りは少コミの特殊事情だとしても、「キレイになりたい」という願望は普遍的なものだ。「そのままの君が好き」は、単なる流行り廃りで廃れたのではない。この世の基本原理に反しているため、長続きしなかったのだ。<br />
　というわけで、この号のなかには、メガネ問題についての納得のいく結論は見つからない。「メガネを外してキレイになる」の安易さと、「そのままの君が好き」の弱点をどちらも避けた、新しい結論が必要だ。<br />
　新しい結論がまだないので、この話もオチがない。あしからず。</p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000312.html">00:33</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=312" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;12&#26085;</h2>


<div class="blogbody">
<a name="000311"></a>
<h3 class="title">1492:47</h3>

<p>　読者諸氏はどんな紅茶がお好きだろうか。<br />
　私のお勧めは、F&amp;MのBreakfastだ。東京の店頭で買うのは難しく、今では日本橋三越にしか置いていない。昔は新宿京王デパートにもあったのだが。<br />
　これをミルクティーで飲む。牛乳は低温殺菌牛乳だ。スーパーの店頭が高温殺菌牛乳で占められているのを見るたびに、雪印事件は起こるべくして起こったのだと思わされる。</p>

<p>　<br />
　　　　　　　　　　　　　　　　　　　　　　　　　　＊<br />
　<br />
　言うまではわからなかった。<br />
　言った瞬間に、わかった。<br />
　私はなにか重大なことを言った。たとえ緋沙子がその重大さをわからなくても、わかっているのが私ひとりだけでも、それは重大なことだった。<br />
　愛の大きさは比較することができない。それがわかっているのに、愛の大きさを比較させようとするのは、いったいどういうことなのか。<br />
　緋沙子は最初、いぶかるように、わずかに目を細めて私の様子をうかがっていた。そしてすぐに、その表情が微笑みに変わる。<br />
　「パパとママ、どっちが好き？　――ってことですか？」<br />
　どうにも答えにくい質問だった。緋沙子は母親と死に別れ、父親から性的虐待を受けて、子供の家（孤児院）に送られた。そんな人の口から出る『パパとママ』には、冗談にならない重い響きがある。<br />
　それで私はごまかした。<br />
　「ひさちゃん、やっと笑った」<br />
　言われると、緋沙子は笑顔をひっこめて、仏頂面になろうとした。<br />
　「私を口説くつもりなら、笑ってるほうがいいんじゃない？」<br />
　すると今度は、さっきの無防備な笑顔のかわりに、気取った笑顔を出してきた。<br />
　「設楽さま、はぐらかしたって、わかります」<br />
　私はなにか重大なことを言った。それは緋沙子にもわかったようだった。<br />
　「私は、陛下に申し上げちゃった。ひさちゃんは、私の一番大切な人ではありません、って」<br />
　「おかげで私はクビです」<br />
　その口ぶりは、緋沙子の歩く姿を連想させた。背筋をまっすぐにして、ぴんと胸を張った姿。孤独に押し潰されないように、戦う人の姿。<br />
　<br />
　比較することのできない愛の大きさを、比較させようとするのは。『パパとママ、どっちが好き？』と子供に訊ねるのは。<br />
　愛されなくても悲しまず、愛されても怯まない、その徴。<br />
　つまり、愛していることの証。<br />
　<br />
　愛の大きさの大小を、口にのぼせるのは。『一番大切な人ではありません』と私が言ったのは。<br />
　嘘をついている徴。<br />
　誰かを愛していないことを、愛の小ささにすりかえて、言い訳しているか。<br />
　あるいは。誰かを愛していることを、小さく見せかけて、ごまかそうとしているか。<br />
　『一番大切な人ではありません』と私が言ったのは、『陛下を愛するように愛しています』という意味。<br />
　<br />
　「ごめん」<br />
　緋沙子は微笑んだ。今度は、気取ってもいなければ、無防備でもない。弓がたわんでいるように、楽しい秘密を知っている人のように、なにかの力を秘めて輝いている。<br />
　「ね、いま、調子が出てきました――」<br />
　そのとき、火にかけていたやかんが鳴りだした。私はキッチンにゆき、紅茶をいれる。居間に戻り、さっきよりは少し離れて座って、<br />
　「なんだっけ、調子が出てきたの？」<br />
　「……もういいです」<br />
　「ごめん」<br />
　「私は謝りません」<br />
　「そりゃ、ひさちゃんは悪いことしてないもの」<br />
　「いいえ。設楽さまに辛い思いをさせてます。悪いことです。<br />
　でも謝りません。<br />
　これからも、設楽さまに辛い思いをさせるつもりです」<br />
　ゆっくりと、なにかを確かめるように、緋沙子は言った。<br />
　声は静かだったけれど、心はたかぶっているのだろう。頬には赤みがさし、目は潤んでいる。<br />
　美しい。<br />
　あまりに美しくて、私は目をつぶった。<br />
　「――名前で呼んで。ひかる、って」<br />
　「ひかるさま、――」<br />
　緋沙子が身体を近づける気配がした。<br />
　抱きしめられる、と思っていた。けれど緋沙子は私の手をとると、その甲に軽くくちづけた。<br />
　目を開けると、緋沙子は私の手をとったまま、落ち着かなさそうにしていた。私の視線に気づくと、その手も離して、<br />
　「……お茶は、まだしばらく時間がかかるんですね」<br />
　「やっぱり今日は、調子が出ない？」<br />
　「はい。泣き落としなんて、カッコ悪すぎて、できません」<br />
　「それもそうか」<br />
　「でも、手ぶらで帰るのも嫌ですから、これからずっと、『ひかるさま』ってお呼びします」<br />
　そのあとは、以前と同じように、おしゃべりを楽しんだ。<br />
　このあいだの食器の話の続きをした。この週末に、緋沙子の家を訪ねる約束をした。<br />
　公邸の噂話をした。大沢さんは、お召し物にゴスロリを入れようと何度も企んでは、そのたびに陛下に跳ねつけられているとか。<br />
　陛下のことを話した。<br />
　『ひさちゃんはひかるちゃんが好きで、でもひかるちゃんは気がつかない、っていうのが理想だったんだけど』<br />
　『ひさちゃんがいなくなって、落ち込んでるひかるちゃんが、見たいんだー』<br />
　そんなことをおっしゃったという。<br />
　今日は私の帰りが遅かったので、話せる時間はあまりなかった。緋沙子をバス停まで送ってゆき、バスが来るまで、ずっと話していた。<br />
　「またね」<br />
　「はい。土曜日、楽しみにしてますから」<br />
　明後日にまた会うのに、私は、バスの窓に向かって手を振り、緋沙子も振り返した。<br />
　自分の気持ちが、痛いほどわかる。私は緋沙子が好きだ。<br />
<a href="http://kaoriha.org/nikki/archives/000316.html#more">Continue</a></p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000311.html">00:55</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=311" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;08&#26085;</h2>


<div class="blogbody">
<a name="000310"></a>
<h3 class="title">金槌は役に立たない</h3>

<p>　あらゆる人々と同じく、プログラマの耳に入る情報も、かなりの部分がテンプレでできている。<br />
　「××は役に立たない」というテンプレを聞かずに一週間を終えることはまずない。それでも、<a href="http://blogs.itmedia.co.jp/tamaki/2006/06/post_57ab.html">××の中身によっては煽られる人がいるのだから面白い（コメント欄）</a>。<br />
　登場したばかりの新技術は、それがどのくらい役に立つのか、誰も知らない。だから、「金槌を使えば、ネジ回しなんかなくても、木材に木ネジを打ち込めますよ」というような極論を唱える人が出てくる。実際に木ネジを打っている人がこう主張するならまだいい。しかし、自分では打ちもせずに主張する糞野郎がぞろぞろと出てくるのだから目障りだ。その反動として、「金槌は役に立たない」という声の大合唱が始まる。<br />
　だから、「××は役に立たない」という声はいつものことであって、なんの問題もない。そういう声がやかましく聞こえてきたなら、××をかじっておいたほうがいい。他の人が、木ネジを打ち込むような真似をたっぷりやらかしてくれた後なので、同じ轍を踏まずにすむ。<br />
　<br />
　問題は、そういう声が聞こえない技術だ。<br />
　「××は役に立たない」と言われないような技術は、以下のどちらかだ。<br />
1. わずかな数の信者以外は誰も使っていない<br />
2. おぞましいことが起こっている<br />
　1については解説不要なので、2について。<br />
　この世界では、本当に恐ろしいことが、現実に起こる。人間はそういうものをなかなか認識することができない。第二次大戦中の連合国では、アウシュビッツの存在など、ほとんど誰も信じなかった。ある意味では、アウシュビッツに収容された当のユダヤ人さえも、十分に信じてはいなかった。「絶滅収容所」なんてものは、どう考えても、ありそうにないことではないか？<br />
　プログラマの世界にも、そういうことが起こった――C言語だ。<br />
　「C言語は役に立たない」という声を、私はほとんど聞いた覚えがない。<br />
　もちろん、C言語は全能ではなかった。しかし全能でなければならなかった。だから、C言語の全能性を否定するようなものが、すべて抹殺されたのだ。「C言語は役に立たない」という声を発する人々が抹殺された。そういう人々のする仕事が抹殺された。C言語が人々を助けたのではなく、人々がC言語の鋳型に合わせて鋳直された。<br />
　幸いなことに、抹殺は完全ではなかった。C言語の全能性を否定するような仕事と人々も、ごく一部で生き残った。たとえば数値計算である。「C言語は速い」という神話では、彼らを抹殺することはできなかった。<br />
　C言語には、コンパイラによる最適化を妨げるような特徴がいくつもある。たとえば、参照がなく、そのかわりにポインタを使わせることだ。参照ではできてポインタではできない種類の最適化があり、これは数値計算の性能に致命的な影響を与えることがある。この性能の差はそのまま計算機時間の差に、計算機時間の差はそのままコストの差になり、このようにして示されるコストの差は、経営判断を決定的に左右した。<br />
　C言語は数値計算を支配することができなかったので、そのかわりに、「数値計算の世界にはFORTRANの資産が山ほどあって、しがらみを断ち切れない」というプロパガンダで取り繕うことになった。これにはいくらか真実も含まれている。それは、Pascalなどに移行せずFORTRANにとどまる理由ではあった。しかしC言語に移行しない理由ではなかった。<br />
　C言語の全能性のために、何が失われたか。<br />
　過去10年間のセキュリティ脆弱性情報から、メモリ管理関連のものだけを抜き出して眺めてみるといい。しかもこれは半永久的に続く。<br />
　だがこれは氷山の一角にすぎない。より巨大な損失は、生産性の分野にある。メモリ管理のために費やされたコストを測定する方法はない。だが、もし測れたとしたら、セキュリティ脆弱性による損失よりも百倍のオーダーで大きいだろう。<br />
　そして、量の損失ならまだ救いがある。質の損失はどうか。メモリ管理や文字列操作の難しさのために書かれなかったソフトウェアは、夢のなかにさえ出てこない。<br />
　おわかりだろうか。<br />
　人は、金槌で木ネジを打つ。その愚かさに気づかず、打ち続ける。けっして愚かではない何百万人もの人々が、何十年にもわたって。<br />
　おぞましいことだ。<br />
　<br />
　「××は役に立たない」という声が聞こえるのは素晴らしいことだ。特に××にとって素晴らしいことだ。祝福といってもいい。<br />
　「××は必要だ」「使える」とばかり言われて、「役に立たない」と言われない××は危険だ。特に、たくさんの人が実際に××にかかわっているなら、それは、知性と決断力を総動員すべしというサインだ。<br />
　<br />
　ところで、これは技術ではないが、祝福されない危険な××を思いついた。あなたはこんな声を聞いたことがあるだろうか。私はない。<br />
　「実務経験は役に立たない」</p>



<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000310.html">22:39</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=310" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>





<div class="blogbody">
<a name="000309"></a>
<h3 class="title">少コミを読む（第2回）</h3>

<p>　少コミ第13号を読んだ。前回からほとんど日が空いていないが、そういうタイミングで決心したのだから仕方ない。<br />
　「少コミ」がなんのことかわからない読者がいるかもしれないと気づいたので、解説しておく。小学館が発行する月2回刊まんが誌「少女コミック」のことだ。</p>

<p>　<br />
・車谷晴子「美少年のおへや。」新連載第1回、ただし短期連載（？）の続編<br />
　主人公が家政婦になって金持ちの家に入り込む、というタイプの逆ハーレムである。謎解き要素のない<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.490630283&type=10&subid="></script>『フルハウスキス』</a>か。ただしこちらは少コミなので、家政婦ではなくメイドとなっている。短期連載かなにかの続編で、最初から主人公（<b>小雪</b>）と彼氏役（<b>斎</b>）がくっついている。<br />
　メイド服のデザインが辛い。ヘッドドレスのデザイン上の役割がわかっていない。ワンピースが前開きなのはどういう了見だろう（おそらく背中や肩が描けないからだと思うが）。資料もろくに検討せず、ほとんどなにも理解せずに描いたことが明白だ。<br />
　（ヘッドドレスのデザイン上の役割：<br />
　原理はわからないが、頭から斜めにでっぱっているものをつけると、萌えパーツとして機能する。同様のものに、看護婦のナースキャップ、To Heartのマルチの耳カバーなどがある。斜めでないと<a href="http://www.7andy.jp/books/detail?accd=07005674">『神聖モテモテ王国』</a>のファーザーのツノになるので要注意）<br />
　話のほうは、初エッチまでの努力と葛藤である。手筋手筋で進んでいる。オチは未遂なので、当分このまま引っ張るつもりだろう。<br />
　新連載第1回なのに、ネームがあまり感心しない。これは編集部で蹴ってほしかった。<br />
　採点：☆☆☆☆☆　本当はもっと低い点数にしたい。<br />
　<br />
・<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.490179335&type=10&subid="></script>池山田剛「萌えカレ!!」</a>第33回、次号で最終回。<br />
　顔がそっくりな腹違いの兄弟（<b>宝</b>と<b>新</b>）の二者択一である。少コミでは、女を選ぶ二択だと、最初から結果が見える。逆に男の二択は、限界を超えて先を見せない。これも引っ張りすぎて明日を捨てている。『単行本ノ読者ニ尽クス者ガ、掲載誌シカ認メナイ私ニカナウワケガナイ』。少コミはジャック・ハンマーの世界なのだ。<br />
　「女の帰属先を試合で争う」という、古い懐かしい手筋が出てくる。登場人物の心理が精密になるとともに扱いづらくなって廃れたが、まだ完全に滅びたわけではないらしい。<br />
　宝と新の二択でどちらに行くか、私の予想（というより願望）を書いておこう。新だ。理由は、「別れた二人はまた元の鞘に収まる」というあの鋼鉄の法則を破るからだ。「元の鞘に収まるのが幸せ」というイデオロギーがどれほど有害なものか、筆舌に尽くしがたい。<br />
　採点：★★★☆☆<br />
　<br />
・<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.490179328&type=10&subid="></script>青木琴美「僕の初恋をキミに捧ぐ」</a>連載第20回<br />
　実は私は、青木琴美には先入観があった。<br />
　何年か前、たまたま少コミのある号を手にしたとき、<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.471893247&type=10&subid="></script>『僕は妹に恋をする』</a>の連載を（その回だけ）読んだ。ひどいものだと思った。絵はたいしたことがないし、話もネームも眠たい。これも<a href="http://asia.google.com/search?hl=ja&q=%E6%9C%AC%E3%81%AF%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB%E3%81%8C9%E5%89%B2&lr=">『本はタイトルが9割』</a>のたぐいか、と。<br />
　が、今回、その認識を改めた。<br />
　これが構成というものだ。実に自然な手で、うまい含みを作る。含みを生かすのもうまい。『僕は妹に恋をする』を読んでみたいという気にさせられた。思えば、少コミで男主人公の連載を持つからには、かなりの手練のはずなのだ。<br />
　話のほうだが、真の彼女役が動いた。主人公をライバルに占有されたので、他に男を作ろうか、という流れである。<br />
　採点：★★★★☆<br />
　<br />
・咲坂芽亜「ラブリー・マニュアル」新連載第1回<br />
　「モテ」という概念の煽動力はすさまじい。<br />
　「祖国」や「復讐」の煽動力は、歴史の授業で教えてくれる。それでもハマる奴はいくらでもいるが、馬鹿は放っておこう。しかし、さらに強力な「モテ」のほうは、誰もその煽動力を教えようとしない。<br />
　煽動は、口先で唱える目的を達成することができない。「祖国」を唱えて祖国を滅ぼし、「復讐」を唱えて踏みにじられる、そういう例は歴史上に事欠かない。「モテ」も同じだ。<br />
　この作品はまさに煽動だ。それも出来が悪い。「モテ」を「社会主義」に、「おしゃれ」を「労働」に置き換えれば、まるっきりソ連の体制文学になる。<br />
　煽動も、なんらかの真実を含んでいれば、価値がある。たとえば、おしゃれをする動機は、言葉にならない真実の潜む領域だ。『刑務所の中でさえ、女囚たちは郵便袋の染料で、自分たちの唇を赤くしているそうだ』（<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.488642891&type=10&subid="></script>ジョージ・オーウェル『気の向くままに』</a>180ページ）。<br />
　連載なので、第1回は煽りで、ここからいい話にもっていく、という可能性はある。「結局なに着てたっていいんじゃん→でもおしゃれしたいよね」という結論になればすべてよしだ。ただ、そこまで批判精神のある作品を少コミで読んだ記憶はないが。<br />
　ネームの流れはいい。が、やはり電波が足りない。<br />
　採点：★☆☆☆☆<br />
　<br />
・悠妃りゅう「すぺしゃる・ダーリン」第2回<br />
　話にトリックがある。なにを書いてもネタバレになるので、話については書けない。あしからず。<br />
　ネームはよどみなく流れ、笑いの使い方も的確だ。これなら彼氏役の造形が眠たくても問題にならない。<br />
　採点：★★★☆☆<br />
　<br />
・藤原なお「おねえちゃんの秘密」読み切り<br />
　どこかの遊園地でカップル用のイベント期間があり、それとのタイアップ作品らしい。<br />
　年下の男に遊園地に誘われて行き、カップル用のイベントに参加して、という話だ。年下の男とくっつく話をひさしぶりに見た気がする。花ゆめあたりなら連載でも（さらに男が小学生でも）見かけるが、少コミでは珍しい。<br />
　ネームの構成が弱い。もっといろいろな手で揺さぶりをかけるべきだ。タイアップ作品にどこまで望めるのかわからないが、広告としては読ませるほうだろう。<br />
　採点：★☆☆☆☆<br />
　<br />
・<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.490179326&type=10&subid="></script>水波風南「蜜×蜜ドロップス」</a>連載第43（？）回、次々号で最終回。<br />
　前号は第41回と扉絵にあったのに、今号では第43回と書いてある。どちらかに2話収録かと思って目次を見ても、また話のつながりからも、どうもそんなことはない。どちらかの誤植だろう。<br />
　絡みの合間に話が進む、といった趣だ。それでちゃんと納得のいくように話が進むのだから面白い。その話はというと、柚留が婚約者として可威の両親と対面する。そして当然、婚約にノーと言われる。<br />
　ところで、可威の父親は、食事中にも帽子をかぶったままだ。なんの意味があるのだろう。<br />
　採点：★★☆☆☆<br />
　<br />
・麻見雅「欲しがりなジュエル」読み切り、ただし<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.490630299&type=10&subid="></script>シリーズ物</a>。<br />
　ネームも話も面白いほど図式的で、『のらくろ』の時代のまんがを連想させる。『のらくろ』が小気味よく読めるように、この作品もなかなかいい。ただ、いくら図式的でも、宝飾品を衝動買いする主人公はどうかと思うが。<br />
　話は、ファンタジー要素の混じった怪盗物だ（このへんもまた『のらくろ』時代を思わせる）。衝動買いした宝飾品が、催淫の呪いのかかったもので、主人公を淫夢などで苦しめる。例によってのピンチのあと、問題の怪盗が現れ、主人公を満足させて宝飾品を盗んでゆく。<br />
　あらすじを書くとなにかねっとりした話のようだが、実物はやけにからっとしている。不思議な個性だ。<br />
　採点：★★★☆☆<br />
　<br />
・天音佑湖「恋敵は子猫ちゃん・」読み切り<br />
　生徒がみなペットを連れて登校するという謎ドリームな学校――をどう思うかが問題だが、ここで否を唱えるのは少コミ精神に反する。力強く共感するのだ。<br />
　学校の獣医が、主人公の猫を気に入り、それをきっかけに二人は接近、それは嬉しいけれど自分に関心を持ってほしい、という話である。<br />
　謎ドリームには共感しよう。共感する。共感した。<br />
　が、動物の絵が、あまりにも辛い。画面の構成も辛いので、どうも画力に根本的な問題があるらしい。<br />
　採点：☆☆☆☆☆<br />
　<br />
・<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.490179333&type=10&subid="></script>新條まゆ「愛を歌うより俺に溺れろ！」</a>連載第9回<br />
　私をむかつかせるのは簡単だ。「男なんかより　うんと気持ちいいこと　してあげるよ」といったセリフを書けばいい。前回、「共に　この芸術品を　愛でようじゃないか…」とぬかして全読者を驚き呆れさせた奴の言うことではあるが、それでも私は律儀にむかつく。まったく簡単だ。<br />
　今回は、<b>水樹</b>のピンチ脱出と、ブラック<b>秋羅</b>のアピールが主眼らしい。<b>蘭</b>が水樹に申し出た「姫」の意味はまだわからない。永遠にわからずじまいになるかもしれない。過ぎたことは忘れる、男らしい作風なのだ。たぶん望月三起也『ワイルド7』から作劇術を学んだのだろう（嘘）。<br />
　設定の複雑さも含めて、この展開に読者がついてきているのかどうか、かなり疑問だ。<br />
　採点：★★★☆☆<br />
　<br />
・市川ショウ「恋愛＠ホーム」読み切り<br />
　目指しているものはなんとなく伝わってくるが、絵、ネーム、画面構成、あらゆる技術面で辛い。<br />
　採点：☆☆☆☆☆<br />
　<br />
・<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.474983042&type=10&subid="></script>織田綺「小悪魔カフェ」</a>最終回<br />
　前回はぐだぐだなだけだったが、最後はぐだぐだなりに気持ちよく終わった。ここに出てくる「走る」という手は、なかなか汎用性がありそうだ。<br />
　採点：★☆☆☆☆<br />
　<br />
<a href="http://kaoriha.org/nikki/archives/000319.html">第3回に続く</a></p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000309.html">01:53</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=309" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;06&#26085;</h2>


<div class="blogbody">
<a name="000308"></a>
<h3 class="title">1492:46</h3>

<p>　ウソ泣きについて。<br />
　この技を一度も使わずに一生を終えるのはなかなか難しいと思うが、ウソ泣きをまともに描いた小説・まんがは、ひとつしか思い出せない。さらに、そのひとつのタイトルが、どうしても思い出せない。</p>

<p>　<br />
　　　　　　　　　　　　　　　　　　　　　　　　＊<br />
　<br />
　涙は、いったん流れてしまえば、それほど長くは続かない。涙をこらえている時間に比べれば、ほんの一瞬だ。<br />
　居間に通してソファに座らせたころには、緋沙子はもうほとんど泣きやんでいた。さっきまでの緊張はすっかり解けて、いまは、昼寝中の飼い犬のように、静かに息をしている。<br />
　私はその隣に座って、手を握っている。<br />
　初めは、緋沙子を抱こうと覚悟していた。私にできることはそれくらいしかない。けれど、緋沙子がすぐに落ち着いたのを見て、覚悟を取り消した。欲しいと思わないときに抱くのは、緋沙子のプライドを傷つけるだろう。<br />
　沈黙を破ったのは緋沙子だった。低い声で、ぽつりと、<br />
　「すごい自己嫌悪です」<br />
　「ひさちゃんは、なにか悪いことしたの？」<br />
　「ウソ泣きしておねだりするなんて、カッコ悪すぎます」<br />
　「ウソ泣きなんて、いつしたの？」<br />
　「さっきです」<br />
　どうやら緋沙子は、さっきの涙を、ウソ泣きと言い張ることにしたらしい。<br />
　「でも、おねだりは、するんでしょう？」<br />
と私が意地悪を言うと、緋沙子は気色ばんで、<br />
　「しません！」<br />
　「そうだったね。ひさちゃんは私を口説きにきたんだっけ」<br />
　緋沙子は口をへの字にして、目をそらした。そして、<br />
　「はい。でも、調子が出ないから、もう帰ります」<br />
　そう言って腰を浮かせた緋沙子に、<br />
　「自信がないから、もうしたくない？」<br />
　私はいつかのセリフを持ち出した。緋沙子はすぐに気づいて、頬を赤らめ、<br />
　「――はい。こう見えても繊細なんです」<br />
と、いつかと同じセリフで応じて、腰をソファに沈めた。<br />
　私はいったんその場を離れてキッチンに行き、やかんを火にかけた。居間に戻って、遠くから声をかける。相手があまり近くにいると、話しづらいこともある。<br />
　「さっきも訊いたけど、もう一回訊くよ。<br />
　ひさちゃんは、どうしたいの？」<br />
　「陸子さまにお仕えしていたいです」<br />
　「私とは会えなくなってもいい？」<br />
<a href="http://kaoriha.org/nikki/archives/000311.html#more">Continue</a></p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000308.html">23:35</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=308" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;05&#26085;</h2>


<div class="blogbody">
<a name="000307"></a>
<h3 class="title">人体実験：少コミを読む（第1回）</h3>

<p>　私は少コミを読んで育った。が、あまりにも昔のことだ。すぎ恵美子が『Cherryのまんま』や『子供じゃないモン！』を連載していた頃なのだ。現在の少コミとの距離は、マーガレットとの距離とほとんど変わらない。<br />
　現在の少コミにも、少しは触れている。新條まゆを読んでは驚き呆れ（褒め言葉）、刑部真芯にしばらく注目し（百合的なセンスを感じる）、いまは、しがの夷織に少し注目している（これも百合的なセンスを感じる――と書いて自分で思ったが、……共通点はゴスロリ？）。が、雑誌自体を続けて読む機会はほとんどなかった。<br />
　なかなか面白いことになっている、いつかまた続けて読もう――と思いつつ幾歳月が過ぎた。<br />
　今日こそがその日だ。私は少コミの第12号を買った。</p>

<p>　<br />
　ただ読むだけでは面白くないので、載っている作品の感想を書いていくことにする。<br />
　まったくの異文化の目で書くほうが面白いのだろうが、ここは無理せず、元少コミ読者的にいく。<br />
　本題に入る前に、表記について。ハートマーク等は入力が面倒なのですべて中黒（・）で書く。モノローグを引用するときは“”で囲む。<br />
　<br />
・悠妃りゅう「すぺしゃる・ダーリン」新連載第1回<br />
　現在の少コミでは、主人公の彼氏役は、なんらかの権力者であることが多い（私は、榊ゆうかの描くようなイマイチで愛嬌のある男のほうが好きなので、この傾向は気に食わない）。ラノベのヒロインがなんらかの権力者であるのと同じ理屈だ（こちらには文句はないが、そもそもめったに読まない）。<br />
　ただし、その権力のつけかたには違いがある。<br />
　少コミでは、どんなに無理やりにでも、現世的な権力をつける。ラノベでは、ファンタジー色の強い権力をつける。たとえば、<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.490179321&type=10&subid="></script>新條まゆ『快感フレーズ』</a>の咲也は人気歌手、<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.377164909&type=10&subid="></script>おかゆまさき『撲殺天使ドクロちゃん』</a>のドクロちゃんは天使、という具合だ。<br />
　（もちろん例外も多い。たとえば<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.476738236&type=10&subid="></script>新條まゆ『悪魔なエロス』</a>がそうだ。新條まゆは、少コミを体現しているかのように思われているが、こういう法則を積極的に破りにゆく。この積極性が彼女を第一人者たらしめているのだろう）<br />
　さて、本作品の場合、主人公（<b>すみれ</b>）の彼氏役（<b>春日</b>）の権力は、「カリスマ美容アドバイザー」だ。また、有名な美容整形外科医の息子でもある。<br />
　最近の少女まんがでは、つきあい始めるまでのシーケンスは適当にすっとばすことが多い。本作品では回想2ページだ。前半の大部分は、春日の権力と、すみれと春日の関係を描くことに費やされる。<br />
　折り返し点で問題が提起される。「すみれと春日の関係はあまり彼氏彼女らしくない」という例のパターンだ。そこですみれは春日をベッドに誘う。微妙な行き違いのあと、すみれが気絶してオチとなる。<br />
　考え抜いたネームだと思う。連載第1回なら当たり前のこととはいえ、よく考えてある。だが、それが見えてしまうこと自体の辛さはある。<br />
　春日の造形が無難で眠たい。権力者・魅力的・無難、これらのうち2つまでは同時に成り立つが、3つ同時はほとんどありえない。<br />
　採点：★★★☆☆<br />
　<br />
・<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.490179326&type=10&subid="></script>水波風南「蜜×蜜ドロップス」</a>連載第41回<br />
　主人公の彼氏役が権力者というにとどまらず、階級のある学園世界を舞台にしている。特権階級のメンバーがそれぞれ平民をひとり指名して、卒業までのあいだこき使う、というもの。特権階級側は「ご主人様」、指名された平民側は「HONEY」と称される。<br />
　上で述べた法則に従い、主人公（<b>柚留</b>）は平民で、その彼氏役（<b>可威</b>）は特権階級、両者はHONEYとご主人様だ。<br />
　前回まで学校側は、「HONEY」のことをまじめに考えてほしいという目論見で、大掛かりな茶番を仕掛け、今回それを終わらせた。生徒側は（特権階級も平民も）その目論見にはまり、「HONEYいいねえ」「ご主人様いいねえ」「この制度いいねえ」というムードになる。<br />
　茶番終了のほかにも、かつての敵（男）と和解し、安堵の流れで最終ページ、柚留と可威がいい雰囲気になっているところでカメラが引き、二人を見つめる第三者（女）が登場。女は柚留のよい影響力を認めつつ、「可威の生涯のパートナーでいるためには　まだまだ不十分だわ」で締める。<br />
　ここまでの書き方でおわかりだろうが、むかつく。「人間的な触れ合いで階級意識を克服する」式の話は、「貧乏人は金持ちよりも道徳的に高いので愛される」式の話と同じくらい有害だ。<br />
　採点：☆☆☆☆☆<br />
　<br />
・<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.490179328&type=10&subid="></script>青木琴美「僕の初恋をキミに捧ぐ」</a>連載第19回<br />
　珍しくも男が主人公である。余命いくばくもない（にしては普通の学校に通学などもする）主人公が、『君が望む永遠』流に優柔不断している。とはいえ、真の彼女役はきっちり決まっており、現ライバルがどんな意味でも勝利を収める見込みがないことは、ネームから一目瞭然だ。<br />
　完全勝利が一目瞭然なのが辛い。ライバル側に感情移入したがる読者は一定の割合で存在する（私もそうだ）。なんらかの分がライバル側にないと辛い。だが、このノリからいって、最後まで分がなくて終わるとも思えない。次回かその次あたりで、ライバル側の分を出してきて、出し遅れの証文にするのではないかと危惧している。<br />
　あと、男主人公でまじめに恋愛物しているとエロゲー臭を感じるのは、私のエロゲー脳が作り出す幻覚なのだろうか。<br />
　採点：★★☆☆☆<br />
　<br />
・サトリタエ「初コイ×ホームラン」読み切り。ただし、お題が「ハニカミ」と定められている。<br />
　主人公の彼氏役が、珍しくも野球少年である。話は、初デートを淡々と描き、取ってつけたように問題提起＆オチをつけて終わる。<br />
　アウトドアのスポーツマンには肌にトーンを貼るべきだと思うが、貼っていない。面構えも男っぽくない。思えば少コミでは昔から、スポーツマン的な男っぽい顔をほとんど見ない。脇役・チョイ役でもだ。描けないのか、描かせてもらえないのか。<br />
　導入部のネームが猛烈にぎこちない。手筋を知らないのだろう。ネームの流れのいい少女まんがを徹底的に分析してからやりなおせ、と言いたい。<br />
　採点：★☆☆☆☆<br />
　<br />
・咲坂芽亜「ラブリー・レッスン ～夏服編～」読み切り。ただし、<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.490179332&type=10&subid="></script>すでに完結した連載</a>の続編らしい。<br />
　主人公がカリスマ店員に、制服のコーディネートやヘアメイクを教えてもらう。そのおしゃれパワーでもって、（未来の）彼氏役と張り合う。当然最後はくっついて終わる。<br />
　ネームの流れがいい。だが、作品の性質上、それ以上のものはあまりない。変な匂い、変な電波が出ている作家は、こういうものは描かせてもらえないのかもしれない。<br />
　採点：★☆☆☆☆<br />
　<br />
・千葉コズエ「君のキャンバス」読み切り<br />
　絵も話も、少コミ的なところがまるでない。「ちょっといいと思っていた男の、知られざる一面（絵を描くこと）を発見→それをきっかけに接近→気合負けしないようにおしゃれに頑張る→それをからかわれる→泣く→ごめん」。<br />
　今号で一番ネームがいい。話自体もネームも、手筋手筋で進むので、特になにも言うことがなくて困るが、ぴったり噛み合って機能している。ただこれも電波が足りない。<br />
　採点：★★★★☆<br />
　<br />
・<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.474983042&type=10&subid="></script>織田綺「小悪魔カフェ」</a>連載第17回<br />
　次号で最終回とのこと。<br />
　前回までは、主人公を二人の男で取り合っていたらしいが、今回でぐだぐだな終わらせ方をしている。どうでもいい。<br />
　採点：☆☆☆☆☆<br />
　<br />
・<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.490179333&type=10&subid="></script>新條まゆ「愛を歌うより俺に溺れろ！」</a>連載第8回<br />
　現在の少コミの第一人者、新條まゆである。<br />
　かなり複雑な設定だ。私自身まだよく理解していないが、とにかくわかったことを書く。<br />
　男海山高校という男子校と、聖野薔薇女子学院という女子校がある。どちらもドリームなハイソ学校らしい。聖野薔薇には「王子様」がいる。主人公（<b>水樹</b>）だ。男海山にも「姫」がいる。主人公の彼氏役（<b>秋羅</b>）だ。水樹は校内でバンド活動をやっており、このバンドは名前を「ブラウエローゼン」という。秋羅は、聖野薔薇の校内に女装して潜入し、聖野薔薇の生徒のふりをして、ブラウエローゼンのメンバーとして活動している。しかもボーカルだ。<br />
　秋羅は、『フィガロの結婚』のケルビーノのような奴らしい。女が声をあて女装もするショタなのに、女を口説くのが大好きだ。ターゲットは水樹である。今回は、いよいよお楽しみを、というところでスケジュールに押されてストップがかかる。<br />
　聖野薔薇のイベントに、ブラウエローゼンが揃って出席する。このイベントで、水樹は上級生の<b>美咲</b>に会う。美咲はかねてから水樹に手を出す機会をうかがっていたらしい。このシーンが面白いので引用する。<br />
　<br />
　「水樹…　会えるのを楽しみにしていたよ　僕は堂島美咲　よろしくね」<br />
　水樹：“この人が3年の王子様か…　ムチャクチャ　キレイじゃんか!!”<br />
　「初めまして　お目にかかれて光栄です」<br />
　「水樹…　今夜　僕の部屋においで…　一緒に　すてきな夜を過ごそう…」<br />
　「あ…　でも　あたし今夜は…」<br />
　“秋羅と一緒に…”<br />
　「いいね…」<br />
　美咲は一輪の百合の花を渡した。すると背景のモブがこれに反応して、<br />
　モブ：「美咲様が　ゆりの花を!?」<br />
　モブ：「やっぱり今年のお相手は　あの子なのね」<br />
　モブ：「なんか…　うらやましい――っ」<br />
　“え…!?　何!?　この　ゆりの花…　なんか意味でもあるのか!?”<br />
　<br />
　この直後、秋羅が割り込んできて美咲を口説きにかかる。事を理解していない水樹をかばおうとしてのことなのだが、水樹には通じず、美咲の部屋を訪れることになる。<br />
　この百合の花はどうやら、「私の部屋に来なさい。来たら襲うのでよろしく」というメッセージらしい。秋羅が別のところで窮地に陥っているあいだ、水樹は美咲に襲われる。そこに現れたのが――突然だがここで設定の説明に戻る。<br />
　男海山高校には二人の権力者がいる。<b>蘭</b>と<b>累依</b>だ。累依は秋羅に執心しているらしい。蘭はミステリアスという役どころらしい。この二人には、秋羅のバンド活動のことはバレている。二人は聖野薔薇のイベント会場に現れ、さらに蘭は――突然だがここであらすじに戻る。<br />
　そこに現れたのが蘭である。蘭は水樹に、「助けてやるかわりに俺の姫になれ」と申し出る。この「姫」がどんな意味かは説明されていない。おそらくは、男装して男海山高校に潜入するという意味だと思うが。<br />
　よくまあこんな複雑な設定を、と驚いた。平均的な少コミ読者の頭でついていけるのだろうか。ちなみに私は、登場人物が6人を越えると、とたんに理解度が下がる。<br />
　理解するまでが大変だったが、わかってみると面白い。ケルビーノ（秋羅）が活躍すると楽しそうだ。<br />
　採点：★★★★☆<br />
　<br />
・天野まろん「かわいいオレ様」読み切り、デビュー作<br />
　少コミ的でないどころか、少女まんが的でもない。はっきりした性的嗜好を持っている主人公を、久しぶりに見た気がする。絵も、少女まんがよりは、男オタクの流れのほうが強い。<br />
　ショタ好きの主人公が、ツンデレのオレ様攻めに口説かれる話である。話もネームもよくできている。内容的には文句はない。が、電波的に、匂いのレベルで、「こいつと私の道は重ならない」と感じる。<br />
　採点：★★★☆☆<br />
　<br />
・<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.490179335&type=10&subid="></script>池山田剛「萌えカレ!!」</a>第32回<br />
　つきあっていた男（<b>宝</b>）を、事故で他の女（<b>亜美</b>）に取られて、その男の腹違いの弟（<b>新</b>。顔が宝にそっくり）とつきあいはじめた主人公（<b>ひかる</b>）。が、宝はやっぱりひかるがいいと思い直し、口説きにかかる。もともと宝が好きだったひかるとしては、ここが考えどころ。ひかるを取られたくない新としては、ここが踏ん張りどころ――で次号に続く。<br />
　理屈の通し方が、手筋といえば手筋だが、あまり好きになれない系統のものだ。ネームは微妙に能がない。<br />
　採点：★☆☆☆☆<br />
　<br />
・<script type="text/javascript" src="http://kaoriha.org/cgi-bin/lks.cgi?id=LKh/PCl0zC4&offerid=94925.490179338&type=10&subid="></script>しがの夷織「キスだけじゃかえさない」</a>最終回<br />
　彼氏役がアイドル、というのはよくある話だ。さらに主人公の弟もアイドルで、しかも主人公のことを好き、というところがいかにもこの人らしい。最終回なので、彼氏役の「アイドルやめる宣言」で盛り上げている。<br />
　「百合を描く人は近親相姦も描く」という相関関係があるような気がしている。この作者もその例に入ってくれるよう祈る。<br />
　理屈の通し方が、私の好きな系統のものだ。いい電波が出ている。単行本で読んでみたくなった。<br />
　採点：★★★★☆<br />
　<br />
・高田りえ「ガバ・カワ」最終回<br />
　悪魔が人間に惚れて力をなくして消滅し、人間に生まれ変わって終わりである。<br />
　話もネームもいいが、電波が足りない。<br />
　採点：★★★☆☆<br />
　<br />
　第1回とあって、説明が長くなった。次号からはもっと短く書く。<br />
<a href="http://kaoriha.org/nikki/archives/000309.html">第2回に続く</a></p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000307.html">19:52</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=307" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;04&#26085;</h2>


<div class="blogbody">
<a name="000306"></a>
<h3 class="title">プログラミング出門</h3>

<p>　年をとるのは嫌なものだ。「どうすればプログラミングできるようになるんですか？」と聞かれるようになる。<br />
　愚問だと思うが、聞かれるものはどうしようもない。ここに答を書いておく。</p>

<p>　<br />
1. この業界の語彙と概念を覚える<br />
　どんな業界でもそうだと思うが、大きな疑問を持つことは禁じられている。<br />
　<b>「どうして携帯電話のメールのパケ代は着信側が払うの？」</b><br />
　ああ、サリー、そいつは訊いちゃいけないことなんだよ。なぜかっていうと、NTTドコモの野郎は、日本中のマスコミっていうマスコミに大量の広告を出して、広告料でマスコミを口封じしてるんだ。<br />
　サラ金の奴らも同じことをやってるんだ。アイフルが業務停止命令を受けるまで、アイフルを告発する報道なんてなかっただろう？<br />
　そうなんだ、サリー。広告をガンガン出してる奴らは、後ろ暗いことをしても平気だから、平気で後ろ暗いことをする。奴らには気をつけろ。サラ金とは関わるな。携帯電話は持つな。そうすれば、お前みたいな質問をしなくてもすむし、そうすれば、くだらない嘘を信じたりすることもないんだ。<br />
　まだお前の質問に答えてなかったね、サリー。教えてあげよう。<br />
　それは、NTTドコモがあくどい金儲けをしたからなんだ。もう少し細かくいうと、NTTドコモがiモードを開発したときに、開発責任者がそうしようと決めたんだ。奴がどれだけデタラメをやったか、俺はちゃんと知ってるよ。<br />
　他の奴らに同じことを訊いたら、それらしい答をもらえるかもしれない。「技術的」な奴をね。でもそれは全部嘘だ。NTTドコモに踊らされてるか、そうでなきゃ、物事を「技術的」に見るのが好きなだけだ。<br />
　iモードの開発責任者は罰されなかった。それどころかNTTドコモはiモードで大儲けした。それを見て、他の携帯キャリアも、同じことをした。<br />
　悪は滅びる、だなんてことは俺には言えないよ。サラリーマンなんてものがこの世に出てくる前から、サラ金みたいな奴らはいたんだ。<br />
　サリー、広告をガンガン出してる奴らには気をつけろ。嘘を信じなくていいように。<br />
　<b>「昔と今を比べたら、3D CGはすごくリアルになったのに、どうして音声合成はへっぽこなままなの？」</b><br />
　SFXには金がかかるけど、声はどんな声でも金がかからないからさ。<br />
　そりゃ、「技術的」な話はいくらでもできる。そういう話のなかには、本当の話もある。だがね、その技術を支えてるのは、金なんだよ。大昔のハリウッド・スターの声を再現するために1千万ドル出す奴がうようよいたら、いまごろエロゲー声優なんてもんはいなくなって、声モデラーなんて商売が流行ってるかもしれないな。<br />
　さあ、サリー、そういう本質的な質問はこれくらいにして、勉強するんだ。そうすれば、もうちょっとくだらない質問ができるようになるぞ。「どうしてJava言語にはレキシカルクロージャがないの？」とかな。それは、<a href="http://article.gmane.org/gmane.comp.lang.lightweight/2274">「ヒープメモリをアロケートするときには必ずnewキーワードを使うこと」っていうルールを決めたからなんだ。</a>たぶん、Guy Steele Jr.も、スタックたんが好きだったんだろうな。でもスタックたんの時代はもうとっくに終わってる。Parrot VMもLua 5.0もスタックレスさ。<br />
　お前もこういうオタクっぽい格好いい話がしたいだろう？　さあ、勉強するんだ。<br />
　<br />
2. 問題を、新しく学んだ語彙と概念で理解するようにする<br />
　道具箱に金槌しか入っていないと、どんなものでも釘に見えるようになる。釘に見えないものは、そもそも認識できなくなる。<br />
　財産を金しか持っていないと、どんなものでも金で買えると思えるようになる。金で買えないものは、そもそも認識できなくなる。<br />
　これは人間の本性で、克服できるものではない。存在は意識を規定する。<br />
　だから、釘を打つように、金で買うように、プログラミングするのだ。そういう状態になれば、「プログラミングで解決するべき問題が見つからない」などということはなくなる。<br />
　<br />
3. 1と2をひたすら続ける<br />
　この業界の一番いいところは、飽きがこないという点だ。新しい語彙と概念が、それこそ雨のように降ってきて、歴史の排水溝に流れ込み、忘却の海へと降りてゆく。<br />
　いい雨が降らないと思ったら、忘却の海に遊びにゆくといい。なかには復活するものもある。たとえば、スタックたんが余命いくばくもないので、<a href="http://madeira.cc.hokudai.ac.jp/RD/yamamoto/Essay/11.html">コルーチン</a>はきっともうすぐ復活する。<br />
　<br />
4. 生命、宇宙、そして万物についての（究極の疑問の）答え<br />
　このエントリをここまで読んで、それでもなお「どうすればプログラミングできるようになるんですか？」と訊くのなら、仕方ない、はっきり申し上げよう。<br />
　私も知らない。</p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000306.html">06:03</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=306" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>



<h2 class="date">2006&#24180;06&#26376;01&#26085;</h2>


<div class="blogbody">
<a name="000305"></a>
<h3 class="title">1492:45</h3>

<p>　いつかどこかで誰かが、こんなことを書いていた。<br />
　「子供は幸せの国にいる。その国では、どんなに辛くても、幸せそうな顔をしていなければならない」</p>

<p>　<br />
　　　　　　　　　　　　　　　　　　　　　　　　　＊<br />
　<br />
　そのたたずまいが、すべてを物語っていた。緊張と葛藤、絶望と意思、そんな心の動きが、人のかたちになって立っているのが、いまの緋沙子だ。<br />
　立っている――それさえも不思議なくらいだった。姿勢や仕草が、ひどくアンバランスで、ちょっと風が吹いただけでも倒れてしまいそうだ。<br />
　自分のただならぬ雰囲気に、緋沙子は気づいていないようだった。<br />
　「こんな夜分に押しかけて――」<br />
　私を待つあいだ、使い慣れない言葉を、何度も頭の中でおさらいしたのだろう。もごもごと早口に詫び口上を述べ立てようとした。私はそれを遮って、<br />
　「ひさちゃんは、どうしたいの？」<br />
　緋沙子は大きく息を吸いこんだ。その音を聞くだけで、痛ましいほどの緊張が伝わってくる。<br />
　「――今日は、設楽さまを誘惑しにきました」<br />
　問いと微妙に噛みあわない返事。泣き顔と区別がつかないようなぎこちない笑顔。<br />
　私は、どうしようもなくて、微笑んだ。いまの緋沙子が誰かを口説こうとするのは、水を燃やそうとするようなものだ。馬鹿げている。けれど。<br />
　「設楽さまは本当は、陸子さまの護衛官でいれば満足なんです。恋のお相手なんかよりも、護衛官のほうが責任重大で、設楽さまはそういうのが好きなんです」<br />
　立っているのがやっとのはずなのに、緋沙子は戦いを始めた。陛下のお側に残るための戦いを。急所を見抜く目は曇っていない。けれど。<br />
　つい数時間前に、『もう身体の関係にはなりません』と陛下にお約束申し上げた。けれど。<br />
　私は緋沙子を抱きしめた。<br />
　「ひさちゃん、泣きたそうな顔してる」<br />
　「あ――」<br />
　無防備な声がひとつ漏れて、涙の堰が破れた。<br />
<a href="http://kaoriha.org/nikki/archives/000308.html#more">Continue</a></p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000305.html">23:47</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=305" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>





<div class="blogbody">
<a name="000304"></a>
<h3 class="title">エロゲーとCMS</h3>

<p>　<a href="http://homepage3.nifty.com/walkinglint/cms/IsCMSUsable.html">エンタープライズCMSは黒歴史になったらしい。</a><br />
　だが、CMSは甦る。CMSの現在の実装がどんなに腐っていようと、その概念自体は、人類の夢を表現しているからだ。<br />
　Webバブルは甦った。DHTMLはAjaxへ、コミュニティはSNSへ、プッシュはRSS配信へとそれぞれ名前を変えたが、その中身はまぎれもなく、Webバブルの夢だ。<a href="http://www.usability.gr.jp/alertbox/9709a.html">「ウェブをテレビのようにする」</a>という夢もやはり甦り、<a href="http://internet.watch.impress.co.jp/cda/news/2006/05/26/12101.html">その地歩を固めつつある</a>。最後にして最大の夢、小額決済も、近いうちに敗北から立ち上がるだろう。今度もまた敗れるかもしれないが、彼らは何度でも立ち上がる。何兆円の損害を積み上げても、彼らを止めることはできない。何度でも呼び名を変えては投資家をあざむき、金をドブに流し込み続けるだろう。それが人類の夢だからだ。経済活動が経済合理性を作り出すのであって、経済活動が経済合理的に行われるのではない。<br />
　さて、エロゲーである。<br />
　いま私の手元には、某エロゲーの開発用データがある。ファイル数は11,776個、サイズは0.98GB。これが小さすぎて参考にならないと思えるのだとしたら、たぶんあなたはコンシューマ機用ゲームの開発者なのだろう。<br />
　この経験を元に、エンタープライズCMSのあるべきユーザモデル（そのシステムの動作についてユーザが抱く世界観）と実装について私見を述べる。</p>

<p>　<br />
　まず、ユーザモデルから。<br />
　<br />
　コンテンツの基本的な単位はファイルであるべきだ。<br />
　ワークフロー情報（バグ追跡やバージョン管理）は別として、コンテンツ自体はファイルを基本的な単位とすべきだ。<br />
　一般人の知能からいって、ファイルがこれほど理解されていること自体が奇跡だ。ユーザがMITかベル研でないかぎり、ファイル以外の単位が理解されると考えることはできない。<br />
　ファイルが基本的な単位なので、CVSやSubversionのように、リポジトリを使うことになる。<br />
　<br />
　作業用コンテンツ（ファイル）は、CVSやSubversionのように、ローカルディスク上にコピーすべきだ。<br />
　これは実装の詳細ではなく、ユーザモデルだ。ユーザモデル上、ローカルディスクとネットワークストレージは別物だ。（認証がなく、非共有の、ユーザが一人しかいないネットワークストレージなら、速度しだいではローカルディスクとみなせるかもしれない）<br />
　「ファイル本体はサーバ上にあって、リッチクライアントで編集する」というのは妄想だ。メールの読み書きくらいは素人でもする仕事だが、プロがコンテンツを作るのは、まったく別のことだ。雑誌の付録を組み立てるようなつもりでは、自動車のエンジンを組み立てることはできない。<br />
　<br />
　変更のコミットは、ファイルの保存とは別動作であるべきだ。<br />
　理由は2つある。1. コミット時にコメントを書くことで、その更新の意図を記録できる。2. やりかけの状態をコミットして、リポジトリやワークフロー情報を汚すことがない。<br />
　<br />
　ファイル名の変更管理はCMSの核心である。<br />
　人間は不適切なファイル名をつける。どんなに完璧な命名規則を作り、どんなに賢いファイル名監視システムを配備したところで、無駄だ。不適切なファイル名は必ず発生する。不適切なファイル名が発生したら、対応策は2つしかない。ファイル名を適切なものに変更するか、あるいは変更せず放置するか、だ。<br />
　変更する場合には、変更前と変更後のファイルが内容的に同一のものであることをユーザに知らせる必要がある。それも、変更時に通知して終わりではない。変更情報が必要になった瞬間に通知が目に入る必要がある。また、ファイル名が変更されたときには、ワークフロー情報もそれを同一のものとして追跡する必要がある。<br />
　CMSが、独立した部品の寄せ集めではなく、システムとして統合されたものである必然性は、ここにある。<br />
　<br />
　リポジトリ内のファイルには必ずワークフロー情報が付随するが、逆は真ではない。つまり、まだ存在しないファイルについてのワークフロー情報は存在しうる。<br />
　たとえば、リポジトリにアクセスしない作業者のために、発注・納品・リテイクというワークフローに対応する必要がある。納品まではファイルは存在しないが、ワークフロー情報は存在する。また、納品後のファイルから納品前のワークフロー情報をたどれる必要がある。<br />
　<br />
　こういうユーザモデルをどのように実装すればいいか。<br />
　<br />
　手始めに、作業用コンテンツ（ファイル）のための専用ファイルシステムが必要だ。<br />
　これは第一に、ファイル名の変更管理のためだ。ファイル名の変更を超えてワークフロー情報を追跡するには、ファイルシステムと関わることになる。TortoiseSVNはWindowsシェルのプラグインという形でこれをやっているが、動作の重さなどで、あまりいい印象がない（今はよくなっているかもしれない）。<br />
　また、専用ファイルシステムを使うことで、リポジトリからの差分取得の方法を細かくコントロールできる。たとえば、差分取得をバックグラウンドで動かしたり、ファイルが開かれるときまで遅延させたりすることができる。<br />
　<br />
　コミットや差分取得のUIは、TortoiseSVNのようにWindowsシェルのプラグインとしてもいいが、それだけですべての作業をやるのは損だ。専用のアプリケーションのほうが使いやすい。ファイルを読み書きするときはExplorerなどで普通に開き、ワークフロー情報を見たり更新をコミットしたりするには専用アプリケーションを使う。<br />
　<br />
　ワークフロー情報は、うっかりすると、途方もなく複雑な代物になる。ばっさりと単純にしなければならない。一例として以下のルールを示す。<br />
・ワークフロー情報は、掲示板のスレッドのように、コメントの連続という形をとる（ワークフロー・スレッド）。それ以外の形式のワークフロー情報は存在しない。<br />
・ワークフロー・スレッドのコメントには、ファイルを添付することができる。この添付ファイルは変更できない。<br />
・1個のリポジトリ内ファイルには、必ず1個のワークフロー・スレッドが対応する。<br />
　<br />
　さてここまで、CMSというと必ず出てくるようなことを、ほぼすべて省略してきた。検索・作業のアサイン・審査と承認・Webテンプレート・ストリーミング・Web掲示板などなどだ。<br />
　こうしたことはすべて、まったく重要でない。<br />
　これらの機能は、ユーザモデルを構築しない。ユーザモデルの上にどう載せるかが問題になるだけで、ユーザモデルを別物に変えるよう迫ることはない。たとえばWebテンプレートは、ファイルとファイルの関係として扱える（それ以外の設計はすべて呪われている）。作業のアサインはワークフロー情報中にWiki的な記号で書ける。承認は電子署名だ。検索はインデックスを、Web掲示板はRDBを扱う必要があるが、いずれにせよ正規化されている。正規化されているというのは、ファイル名に悩まないということだ。名前に悩まないような問題は、大した問題ではない。<br />
　そうそう、いうまでもないが、Webサーバを中心にしたCMSはすべてクソだ。あれらはWebテンプレートとWeb掲示板からスタートしている。機能は提供するが、管理とは無縁だ。「箱から出してすぐ使える」的な擁護も的外れだ。ここまで縷々書いてきたようなリポジトリ型CMSでも、「箱から出してすぐ使える」初期状態で配布することは簡単だ。しかもテンプレートなどがローカルファイルとして編集できる。「PHPで書いてあるからホスティングサービスで使いやすい」？　では、CVSやSubversionは、どうしてもC言語で書かなければならないのか？　専用ファイルシステムが必要なのはクライアント側だけだ。サーバサイドはどんな言語でもいい。<br />
　<br />
　以上、CMS業界の常識からはかけ離れた話をしてみた。<br />
　だが、CMS業界の常識よりは私のほうが、未来に近い。CMS業者は何万行もの糞の山を抱えており、しかもそれを売らなければならない。私はいまのところ一行も持っておらず、おそらくこれからも持たないだろう。<br />
　私は挑戦者を待っている。<br />
　<br />
参考：<br />
<a href="http://www.designit.jp/archives/2006/04/cms_watch_20.html">巨大な格差「ザ・グレート・デバイド」／データベースは20世紀の代物</a><br />
<a href="http://www.designit.jp/archives/2006/03/cms.html">CMSはジャングル状態にある</a></p>


<div class="posted">
	Posted by hajime at <a href="http://kaoriha.org/nikki/archives/000304.html">06:12</a>
		| <a href="http://kaoriha.org/cgi-bin/mt/mt-comments.cgi?entry_id=304" onclick="OpenComments(this.href); return false">Comments (0)</a>
	
	
</div>

</div>


</div>
</div>

</body>
</html>